meta=lfric_atm/rose-meta/lfric-lfric_atm/HEAD

[command]
default=launch-exe

[env]
EXEC_NAME=lfric_atm
OMP_NUM_THREADS=1
TOTAL_RANKS=1
XIOS_SERVER_MODE=True
XIOS_SERVER_RANKS=1

[file:$DESTINATION_DIRECTORY]
mode=mkdir

[file:configuration.nml]
mode=auto
source=(namelist:aerosol)
      =  namelist:base_mesh
      = (namelist:blayer)
      =  namelist:boundaries
      =  namelist:checks
      =  namelist:section_choice
      = (namelist:cloud)
      = (namelist:convection)
      = (namelist:damping_layer)
      = (namelist:departure_points)
      = (namelist:development)
      = (namelist:domain_size)
      = (namelist:external_forcing)
      =  namelist:extrusion
      = (namelist:files)
      =  namelist:finite_element
      =  namelist:formulation
      =  namelist:helmholtz_solver
      = (namelist:idealised)
      =  namelist:initialization
      = (namelist:initial_density)
      = (namelist:initial_pressure)
      = (namelist:initial_temperature)
      = (namelist:initial_vapour)
      = (namelist:initial_wind)
      =  namelist:io
      = (namelist:jules_surface)
      = (namelist:jules_vegetation)
      =  namelist:logging
      = (namelist:microphysics)
      =  namelist:mixed_solver
      =  namelist:mixing
      = (namelist:multigrid)
      =  namelist:esm_couple
      = (namelist:orbit)
      =  namelist:orography
      = (namelist:orography_agnesi_cartesian)
      = (namelist:orography_agnesi_spherical)
      = (namelist:orography_dcmip200_spherical)
      = (namelist:orography_schar_cartesian)
      = (namelist:orography_schar_spherical)
      =  namelist:partitioning
      = (namelist:physics)
      =  namelist:planet
      = (namelist:radiation)
      = (namelist:spectral_gwd)
      = (namelist:orographic_drag)
      =  namelist:solver
      = (namelist:star)
      = (namelist:stochastic_physics)
      = (namelist:subgrid)
      = (namelist:surface)
      =  namelist:time
      =  namelist:timestepping
      =  namelist:transport
      =  namelist:well_mixed_gases

[file:iodef.xml]
mode=auto
source=$ROSE_SUITE_DIR/app/lfric_atm/file/iodef_basic_gal.xml

[file:lut]
source=fcm:um_aux.xm/trunk/ctldata/UKCA/radaer/ga7_1@vn1.18

[file:precalc]
source=fcm:um_aux.xm/trunk/ctldata/spectral/ga7_1@vn1.18

[file:spec]
source=fcm:socrates.xm_tr/data/spectra/ga9@um12.1

[namelist:aerosol]
aclw_file='lut/nml_ac_lw'
acsw_file='lut/nml_ac_sw'
activation_scheme='jones'
anlw_file='lut/nml_an_lw'
answ_file='lut/nml_an_sw'
crlw_file='lut/nml_cr_lw'
crsw_file='lut/nml_cr_sw'
glomap_mode='climatology'
l_radaer=.true.
prec_file='precalc/RADAER_pcalc.ukca'
sulphuric_strat_climatology=.true.
sulphuric_strat_column=1.86604e-6

[namelist:base_mesh]
!!f_lat_deg=45.0
filename='mesh.nc'
!!fplane=.false.
geometry='spherical'
offline_partitioning=.false.
prime_mesh_name='dynamics'
topology='fully_periodic'

[namelist:blayer]
a_ent_shr=1.6
bl_levels=50
bl_mix_w=.false.
cbl_opt='conventional'
dyn_diag='zi_l_cu'
!!fixed_flux_e=0.0
!!fixed_flux_h=300.0
flux_bc_opt='interactive'
free_atm_mix='to_sharp'
fric_heating=.true.
interp_local='cf_dbdz'
new_kcloudtop=.true.
noice_in_turb=.false.
p_unstable=1.0
reduce_fa_mix='inv_only'
relax_sc_over_cu=.false.
sbl_opt='sharp_sea_mes_land'
sg_orog_mixing='none'
!!zhloc_depth_fac=0.4

[namelist:boundaries]
!!blend_frequency='final'
!!blending_weights=0.0
!!boundary_e=1
!!boundary_n=1
!!boundary_s=1
!!boundary_w=1
!!edge_cells_ew=1
!!edge_cells_ns=1
!!inner_width_ew=1
!!inner_width_ns=1
!!lbc_method='coordinate_based'
limited_area=.false.
!!normal_only=.true.
!!outer_width_ew=1
!!outer_width_ns=1
!!output_lbcs=.false.
!!rim_width_ew=1
!!rim_width_ns=1
!!solver_boundary_depth=1
!!transport_boundary_depth=6

[namelist:checks]
limit_cfl=.false.
!!max_cfl=0.75

[namelist:cloud]
cff_spread_rate=1.0e-5
cld_fsd_hill=.true.
!!cloud_horizontal_fsd=0.75
ez_max=400.0
ez_subcrit=.true.
falliceshear_method='real'
filter_optical_depth=.false.
ice_width=0.02
!!mphys_erosion=.false.
!!opt_depth_thresh=0.01
pc2ini='bimodal'
rh_crit=0.920,0.918,0.916,0.912,0.908,0.903,64*0.9
rh_crit_opt='tke'
scheme='pc2'
subgrid_qv=.true.
use_fsd_eff_res=.true.

[namelist:convection]
cv_scheme='gregory_rowntree'
number_of_convection_substeps=2
use_jules_flux=.true.

[namelist:damping_layer]
dl_base=40000.0
dl_str=0.05
dl_type='latitude'

[namelist:departure_points]
departure_grid='uniform'
method='euler'
n_dep_pt_iterations=1
vertical_limit='exponential'
vertical_method='trapezoidal'

[namelist:development]

[namelist:domain_size]
planar_domain_max_x=500.0
planar_domain_max_y=40.0
planar_domain_min_x=-500.0
planar_domain_min_y=-40.0

[namelist:esm_couple]
l_esm_couple_test=.false.

[!!namelist:external_forcing]
!!hs_random=.false.
!!temp_tend_coord='pressure'
!!temp_tend_data=0.0
!!temp_tend_heights=0.0
!!temp_tend_size=1
theta_forcing='none'
wind_forcing='none'

[namelist:extrusion]
domain_top=80000.0
method='um_L70_50t_20s_80km'
number_of_layers=70
stretching_height=17507.0
stretching_method='smooth'

[namelist:files]
aerosols_ancil_path='aerosol_clims/glomap/glomap_clim_n48_v2.ugrid'
!!albedo_nir_ancil_path='orca025/general_land/GlobAlbedo/qrclim.land_surface_diffuse_albedo_of_near_infra_red_radiation_assuming_no_snow.ugrid'
!!albedo_vis_ancil_path='orca025/general_land/GlobAlbedo/qrclim.land_surface_diffuse_albedo_of_photosynthetically_active_radiation_assuming_no_snow.ugrid'
ancil_directory='$BIG_DATA_DIR/ancils/basic-gc/Ticket2907/C48/n96e'
checkpoint_stem_name='$CYLC_SUITE_SHARE_DIR/data/restartLfricAtm_$ROSE_TASK_NAME'
diag_stem_name='diagLfricAtm'
!!dms_conc_ocean_ancil_path=''
!!emiss_bc_biofuel_ancil_path=''
!!emiss_bc_biomass_ancil_path=''
!!emiss_bc_fossil_ancil_path=''
!!emiss_dms_land_ancil_path=''
!!emiss_monoterp_ancil_path=''
!!emiss_om_biofuel_ancil_path=''
!!emiss_om_biomass_ancil_path=''
!!emiss_om_fossil_ancil_path=''
!!emiss_so2_high_ancil_path=''
!!emiss_so2_low_ancil_path=''
!!emiss_so2_nat_ancil_path=''
!!h2o2_limit_ancil_path=''
!!ho2_ancil_path=''
hydtop_ancil_path='orca025/hydrol_lsh/hydrosheds/qrparm.hydtop.ugrid'
land_area_ancil_path='orca025/land_sea_mask/qrparm.landfrac.ugrid'
!!lbc_directory=''
!!lbc_filename=''
!!ls_directory=''
!!ls_filename=''
!!no3_ancil_path=''
!!o3_ancil_path=''
!!oh_ancil_path=''
orography_ancil_path='orography/gmted_ramp2/qrparm.orog.ugrid'
ozone_ancil_path='ozone/sparc/1994-2005/qrclim.ozone_L70_O70.ugrid'
plant_func_ancil_path='vegetation/func_type_modis/qrparm.veg.func.ugrid'
sea_ancil_path='orca025/general_sea/GlobColour/qrclim.sea.ugrid'
sea_ice_ancil_path='seaice/hadisst_6190/v4/qrclim.seaice.ugrid'
soil_ancil_path='soil_parameters/hwsd_vg/qrparm.soil.ugrid.fixed'
!!soil_dust_ancil_path=''
sst_ancil_path='sst/hadisst_6190/v1/qrclim.sst.ugrid'
start_dump_directory='$CYLC_TASK_WORK_DIR'
start_dump_filename='start_dump'
surface_frac_ancil_path='vegetation/fractions_igbp/qrparm.veg.frac.ugrid.fixed'

[namelist:finite_element]
cellshape='quadrilateral'
coord_order=1
coord_system='alphabetaz'
element_order=0
rehabilitate=.true.
vorticity_in_w1=.false.

[namelist:formulation]
dlayer_on=.true.
dry_static_adjust=.true.
eos_method='sampled'
exner_from_eos=.false.
init_exner_bt=.true.
l_multigrid=.false.
moisture_formulation='traditional'
rotating=.true.
shallow=.true.
si_momentum_equation=.false.
use_multires_coupling=.false.
use_physics=.true.
use_wavedynamics=.true.
vector_invariant=.false.

[namelist:helmholtz_solver]
!!diagnostic_norm=.false.
gcrk=8
method='bicgstab'
normalise=.true.
preconditioner='tridiagonal'
si_pressure_a_tol=1.0e-8
si_pressure_maximum_iterations=400
si_pressure_tolerance=1.0e-4

[namelist:idealised]
test='none'

[namelist:initial_density]
r1=0.4
r2=0.4
tracer_background=0.1
tracer_max=2.0
x1=0.4
x2=-0.4
y1=0.0
y2=0.0
z1=0.0
z2=0.0

[namelist:initial_pressure]
method='balanced'
surface_pressure=1000.0e2

[namelist:initial_temperature]
bvf_square=0.0001
pert_width_scaling=1.0
perturb='none'
!!profile_data=300.0,300.0
!!profile_heights=0.0,10.0e3
!!profile_size=2
theta_surf=300.0

[namelist:initial_vapour]
!!profile_data=0.0,0.0
!!profile_heights=0.0,10.0e3
!!profile_size=2

[namelist:initial_wind]
nl_constant=0.0
profile='constant_uv'
sbr_angle_lat=0.0
sbr_angle_lon=0.0
smp_init_wind=.false.
u0=2.0
v0=0.0
wind_time_period=0.0

[namelist:initialization]
ancil_option='fixed'
hydro_coriolis=.true.
init_option='fd_start_dump'
lbc_option='none'
ls_option='none'
read_w2h_wind=.false.

[namelist:io]
checkpoint_read=$RESTART_READ
checkpoint_write=$RESTART_WRITE
counter_output_suffix='counter.txt'
diagnostic_frequency=1
file_convention='UGRID'
!!nodal_output_on_w3=.false.
subroutine_counters=.false.
subroutine_timers=.true.
timer_output_path='timer.txt'
use_xios_io=.true.
write_conservation_diag=.false.
write_diag=.true.
write_dump=.false.
write_fluxes=.false.
write_minmax_tseries=.false.

[namelist:jules_surface]
cor_mo_iter='improved'
fd_stability_dep='none'
formdrag='dist_drag'
l_vary_z0m_soil=.false.
srf_ex_cnv_gust=.true.

[namelist:jules_vegetation]
can_rad_mod='six'
l_limit_canhc=.true.
l_spec_veg_z0=.true.

[namelist:logging]
run_log_level='info'

[namelist:microphysics]
a_ratio_exp=-0.2707
a_ratio_fac=0.0517
droplet_tpr=.false.
graupel_scheme='none'
!!ndrop_surf=50.0e6
qcl_rime=1.0e-4
shape_rime=.true.
turb_gen_mixph=.true.
!!z_surf=50.0

[namelist:mixed_solver]
eliminate_variables='discrete'
gcrk=8
guess_np1=.false.
mixed_solver_a_tol=1.0e-3
normalise=.true.
reference_reset_freq=4
!!si_diagnostic_norm=.false.
si_maximum_iterations=10
si_method='block_gcr'
si_preconditioner='pressure'
si_tolerance=1.0e-3
split_w=.true.

[namelist:mixing]
!!leonard_kl=2.0
leonard_term=.false.
!!method='blending'
!!mix_factor=0.2
smagorinsky=.false.
viscosity=.false.
viscosity_mu=0.0

[!!namelist:multigrid]
chain_mesh_tags=''
multigrid_chain_nitems=1

[namelist:orbit]
!!arg_periapsis=1.796767421
!!arg_periapsis_inc=0.0
!!eccentricity=1.6710222E-02
!!eccentricity_inc=0.0
elements='earth_fixed'
!!epoch=2451545.0
!!fixed_azimuth_angle=0.0
!!fixed_zenith_angle=0.0
!!hour_angle=0.0
!!hour_angle_inc=0.0
!!mean_anomaly=-0.037278428
!!mean_anomaly_inc=0.01720278179
!!obliquity=0.0
!!obliquity_inc=0.0
observer_lat=0.0
observer_lon=0.0
!!semimajor_axis=1.0
!!semimajor_axis_inc=0.0
spin='earth_day'

[namelist:orographic_drag]
cd_flow_blocking=4.0
fr_crit_gwd=4.0
fr_sat_gwd=0.25
gwd_scaling=0.7
include_moisture='moist'
mountain_height_scaling=2.5
orographic_blocking_heating=.true.
orographic_gwd_heating=.true.
vertical_smoothing=.true.

[namelist:orography]
orog_init_option='ancil'
!!profile='none'

[!!namelist:orography_agnesi_cartesian]
direction='x'
half_width_x=10.0
half_width_y=10.0
mountain_height=100.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_agnesi_spherical]
half_width=2500.0
lambda_centre_dec=1.5
lambda_focus_dec=1.5
mountain_height=100.0
phi_centre_dec=0.0
phi_focus_dec=0.3333

[!!namelist:orography_bell_cartesian]
direction='xy'
half_width_x=1000.0
half_width_y=1000.0
mountain_height=400.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_dcmip200_spherical]
lambda_centre_dec=1.5
mountain_height=2000.0
osc_half_width_dec=0.0625
phi_centre_dec=0.0
radius_dec=0.75

[!!namelist:orography_schar_cartesian]
direction='x'
half_width_x=20.0
half_width_y=20.0
mountain_height=250.0
wavelength=20.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_schar_spherical]
half_width=5000.0
lambda_centre_dec=0.25
mountain_height=250.0
phi_centre_dec=0.0
wavelength=4000.0

[namelist:partitioning]
panel_decomposition='auto'
!!panel_xproc=1
!!panel_yproc=1
partitioner='cubedsphere'

[namelist:physics]
blayer_placement='fast'
convection_placement='fast'
lowest_level='gradient'
microphysics_placement='slow'
orographic_drag_placement='slow'
radiation_placement='slow'
sample_physics_scalars=.true.
sample_physics_winds=.true.
!!smagorinsky_placement='end'
spectral_gwd_placement='slow'
!!stochastic_physics_placement='fast'

[namelist:planet]
cp=1005.0
gravity=9.80665
omega=7.292116E-5
p_zero=100000.0
radius=6371229.0
rd=287.05
scaling_factor=1.0

[namelist:radiation]
cloud_inhomogeneity='mcica'
cloud_overlap='exponential_random'
cloud_representation='combined'
cloud_vertical_decorr=10000.0
!!constant_droplet_effective_radius=7.0E-6
droplet_effective_radius='liu'
i_cloud_ice_type_lw=11
!!i_cloud_ice_type_lwinc=11
i_cloud_ice_type_sw=11
!!i_cloud_ice_type_swinc=11
i_cloud_liq_type_lw=5
!!i_cloud_liq_type_lwinc=5
i_cloud_liq_type_sw=5
!!i_cloud_liq_type_swinc=5
l_cfc113_lw=.false.
l_cfc11_lw=.true.
l_cfc12_lw=.true.
l_ch4_lw=.true.
l_ch4_sw=.true.
l_co2_lw=.true.
l_co2_sw=.true.
l_continuum_lw=.true.
l_continuum_sw=.true.
l_h2o_lw=.true.
l_h2o_sw=.true.
l_hcfc22_lw=.false.
l_hfc134a_lw=.false.
l_inc_radstep=.false.
l_n2o_lw=.true.
l_n2o_sw=.true.
l_o2_sw=.true.
l_o3_lw=.true.
l_o3_sw=.true.
l_planet_grey_surface=.false.
l_rayleigh_sw=.true.
l_trans_zen_correction=.true.
mcica_data_file='spec/mcica_data'
!!n_inc_radstep=1
n_radstep=2
!!planet_albedo=0.06
!!planet_emissivity=0.985
spectral_file_lw='spec/sp_lw_ga9'
!!spectral_file_lwinc='spec/sp_lw_cloud7'
spectral_file_sw='spec/sp_sw_ga9'
!!spectral_file_swinc='spec/sp_sw_cloud7'

[namelist:section_choice]
aerosol='um'
boundary_layer='um'
cloud='um'
convection='um'
dynamics='gungho'
external_forcing=.false.
methane_oxidation=.true.
microphysics='um'
orographic_drag='um'
radiation='socrates'
spectral_gwd='um'
stochastic_physics='none'
surface='jules'

[namelist:solver]
diagnostic_norm=.false.
fixed_iterations=13
gcrk=18
maximum_iterations=399
method='chebyshev'
preconditioner='diagonal'
tolerance=1.0e-6

[namelist:spectral_gwd]
add_cgw=.true.
cgw_scale_factor=1.05
ussp_heating=.true.
ussp_launch_factor=1.2
wavelstar=4300.0

[namelist:star]
stellar_constant=1361.0
stellar_radius=6.957e8

[!!namelist:stochastic_physics]
!!spt_add_increments=.true.
!!spt_convection_cfl_limit=.true.
!!spt_decorrelation_time=2.00e+4
!!spt_level_begin_tappering_bottom=9
!!spt_level_begin_tappering_top=30
!!spt_level_bottom=4
!!spt_level_top=34
!!spt_moisture_conservation=.true.
!!spt_mse_conservation=.true.
!!spt_n_max=3
!!spt_n_smoothing_iters=3
!!spt_orog_forcing_pattern_thresh=0.5
!!spt_stddev_convection=1.00
!!spt_stddev_microphysics=1.00
!!spt_stddev_orog_thres=1500.
!!spt_stddev_radiation=1.00
!!spt_use_convection=.true.
!!spt_use_microphysics=.true.
!!spt_use_radiation=.true.
use_spt=.false.

[namelist:subgrid]
calculate_detj='averaged'
dep_pt_stencil_extent=3
rho_approximation='ppm_no_limiter'
rho_approximation_stencil_extent=2

[namelist:surface]
alb_leaf_nir=0.341,0.272,0.369,0.368,0.395
alb_leaf_vis=0.057,0.041,0.071,0.083,0.074
alb_sice_melt=0.72
alb_snocov_max=2.5e-1,2.5e-1,6.0e-1,6.0e-1,4.0e-1
alb_snocov_nvg=0.4,0.8,0.8,0.8
alb_snofree_nvg=0.18,0.12,-1.0,0.75
albedo_obs=.false.
basal_melting='instant'
blue_sky_alb=.false.
buddy_sea='On'
can_cap_nvg=0.5,0.0,0.0,0.0
can_clump=8.0,4.0,1.0,1.0,1.0
cansnowpft=.true.,.true.,.false.,.false.,.false.
cdn_hw_sea=0.002
cdn_max_sea=0.003
dpsids_dsdz=.true.
dt_ice_albedo=2.0
emis_sea=0.985
emis_sice=0.976
evap_scale_sea=1.0
!!fixed_sea_albedo=0.06
fsmc_p0=5*0.6
grain_growth='taillandier'
heat_cap_nvg=2.8e5,2.11e7,0.0,0.0
!!heat_cap_sea=2.0e6
i_high_wind_drag='reduced_v1'
iceformdrag_lupkes=.true.
knl=5*0.2
l_10m_neut=.true.
l_hapke_soil=.true.
l_partition_albsoil=.true.
l_var_rainfrac=.true.
l_vg_soil=.false.
light_extinct=0.5,0.5,1.0,1.0,0.5
n_lai_exposed=5*1.0
n_sea_ice_tile=5
non_iso_scatter=.true.
ratio_albsoil=2.0
relayer_opt='inverse'
rho_snow_fresh=109.0
scat_coef_nir=0.788,0.545,0.864,0.787,0.785
scat_coef_vis=0.101,0.083,0.132,0.135,0.115
sea_alb_method='jin'
sea_alb_var_chl=.true.
sea_surf_alg='coare'
sice_heatflux=.true.
soil_sat_down=.true.
stability_lupkes=.true.
surf_tile_fracs=9*0.0,1.0,0.0
swdn_frac_albsoil=0.5
therm_cond_sea=0.5
therm_cond_sice=2.09
therm_cond_sice_snow=0.256
u_cdn_hw=55.0
u_cdn_max=33.0
unload_rate_u=2.31e-6,2.31e-6,0.0,0.0,0.0
use_hydrology=.true.
use_variable_sst=.false.
z0hm_ratio_nveg=1.0e-7,2.5e-1,2.0e-1,2.0e-1
z0hm_ratio_pft=1.0,1.0,0.01,0.01,0.01
z0v=1.1,1.1,0.22,0.22,1.0

[namelist:time]
calendar='timestep'
calendar_start='1979-01-01 00:00:00'
calendar_type='gregorian'
timestep_end='$RESTART_STOP'
timestep_start='$RESTART_START'

[namelist:timestepping]
alpha=0.55
dt=$DT
inner_iterations=2
method='semi_implicit'
outer_iterations=2
runge_kutta_method='forward_euler'
spinup_alpha=.false.
spinup_period=0.0
spinup_winds=.false.
tau_r=1.0
tau_t=0.55
tau_u=0.55

[namelist:transport]
cfl_mol_1d_stab=1.5
cfl_mol_2d_stab=1.5
cfl_mol_3d_stab=1.5
consistent_metric=.false.
dry_field_name='density'
enforce_min_value=.false.,.false.,.false.,.false.,.true.
ffsl_advective_splitting='full'
ffsl_flux_splitting='full'
ffsl_scheme='three_dim'
field_names='density','potential_temperature','wind','moisture',
           ='tracer'
fv_horizontal_order=2
fv_vertical_order=2
horizontal_method=5*1
log_space=5*.false.
max_vert_cfl_calc='uniform'
min_value=0.0,0.0,-99999999.0,0.0,0.0
moisture_eqn='conservative'
monotone=1,3,1,3,3
oned_reconstruction=.false.
operators='fv'
profile_size=5
reversible=5*.false.
runge_kutta_method='ssp3'
scheme=5*1
slice_order='cubic'
splitting=5*1
use_density_predictor=.true.
vertical_method=5*1
vertical_sl_order='cubic'

[namelist:well_mixed_gases]
cfc113_mix_ratio=4.826e-10
cfc11_mix_ratio=1.110e-09
cfc12_mix_ratio=2.187e-09
ch4_mix_ratio=1.006e-06
co2_mix_ratio=6.002e-04
hcfc22_mix_ratio=6.866e-10
hfc134a_mix_ratio=2.536e-10
n2_mix_ratio=0.7553
n2o_mix_ratio=4.945e-07
o2_mix_ratio=0.2314
so2_mix_ratio=0.0
