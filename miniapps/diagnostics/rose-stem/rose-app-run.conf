meta=miniapps/diagnostics/rose-meta/lfric-diagnostics/HEAD

[command]
aprun=aprun -cc depth -n 1 -d $OMP_NUM_THREADS -j $HYPERTHREADS $BIN_DIR/diagnostics configuration.nml
default=$BIN_DIR/diagnostics configuration.nml
mpiexec=mpiexec -n 1 $BIN_DIR/diagnostics configuration.nml

[file:$DESTINATION_DIRECTORY]
mode=mkdir

[file:configuration.nml]
mode=auto
source=namelist:base_mesh
      =  namelist:extrusion
      =  namelist:finite_element
      =  namelist:io
      =  namelist:logging
      =  namelist:time
      =  namelist:planet
      =  namelist:partitioning
      =  namelist:diagnostics_miniapp

[namelist:base_mesh]
f_lat_deg=45.0
file_prefix=''
fplane=.false.
geometry='planar'
partitioner='planar'
prime_mesh_name='dynamics'

[namelist:diagnostics_miniapp]
blending_percentage=1.0
iodef_path='iodef.xml'
seed_blue=20
seed_green=50
seed_red=1

[namelist:extrusion]
domain_top=1000.0
method='uniform'
number_of_layers=1

[namelist:files]
checkpoint_stem_name='$CYLC_SUITE_SHARE_DIR/data/restartDiagnostics_$ROSE_TASK_NAME'
diag_stem_name='diagDiagnostics'
start_dump_directory=''
start_dump_filename=''

[namelist:finite_element]
cellshape='quadrilateral'
element_order=0
rehabilitate=.true.
supg=.false.
vorticity_in_w1=.false.

[namelist:io]
checkpoint_read=.false.
checkpoint_write=.false.
counter_output_suffix='counter.txt'
diagnostic_frequency=1
!!nodal_output_on_w3=.false.
subroutine_counters=.false.
subroutine_timers=.false.
timer_output_path='timer.txt'
!!use_xios_io=.true.
write_conservation_diag=.false.
write_diag=.true.
write_dump=.false.
write_fluxes=.false.
write_minmax_tseries=.false.

[namelist:logging]
run_log_level='info'

[!!namelist:multigrid]
multigrid_chain_nitems=1

[namelist:orography]
profile='none'

[namelist:partitioning]
auto=.true.
panel_xproc=1
panel_yproc=1

[namelist:planet]
radius=6371229.0
scaling_factor=125.0

[namelist:time]
timestep_end='5'
timestep_start='1'

[namelist:timestepping]
dt=1.0
