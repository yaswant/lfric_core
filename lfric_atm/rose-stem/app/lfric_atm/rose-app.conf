meta=lfric_atm/rose-meta/lfric-lfric_atm/HEAD

[command]
default=launch-exe

[env]
EXEC_NAME=lfric_atm
OMP_NUM_THREADS=1
TOTAL_RANKS=1
XIOS_SERVER_MODE=True
XIOS_SERVER_RANKS=1

[file:$DESTINATION_DIRECTORY]
mode=mkdir

[file:configuration.nml]
mode=auto
source=(namelist:aerosol)
      =  namelist:base_mesh
      = (namelist:biperiodic_deppt)
      = (namelist:blayer)
      =  namelist:checks
      =  namelist:section_choice
      = (namelist:cloud)
      = (namelist:convection)
      = (namelist:damping_layer)
      = (namelist:domain_size)
      =  namelist:extrusion
      = (namelist:files)
      =  namelist:finite_element
      =  namelist:formulation
      =  namelist:helmholtz_solver
      = (namelist:idealised)
      =  namelist:initialization
      = (namelist:initial_density)
      = (namelist:initial_temperature)
      = (namelist:initial_wind)
      =  namelist:io
      =  namelist:logging
      = (namelist:microphysics)
      =  namelist:mixed_solver
      =  namelist:mixing
      = (namelist:multigrid)
      = (namelist:orbit)
      =  namelist:orography
      = (namelist:orography_agnesi_cartesian)
      = (namelist:orography_agnesi_spherical)
      = (namelist:orography_dcmip200_spherical)
      = (namelist:orography_schar_cartesian)
      = (namelist:orography_schar_spherical)
      =  namelist:partitioning
      = (namelist:physics)
      =  namelist:planet
      = (namelist:radiation)
      = (namelist:spectral_gwd)
      = (namelist:orographic_drag)
      =  namelist:solver
      = (namelist:star)
      = (namelist:subgrid)
      = (namelist:surface)
      =  namelist:time
      =  namelist:timestepping
      =  namelist:transport
      =  namelist:well_mixed_gases

[file:ga7]
source=fcm:socrates.xm_tr/data/spectra/ga7@um11.6

[file:iodef.xml]
mode=auto
source=$ROSE_SUITE_DIR/app/lfric_atm/file/iodef.xml

[namelist:aerosol]
c_aerosol='glomap_mode_climatology'

[namelist:base_mesh]
f_lat_deg=45.0
filename='mesh.nc'
fplane=.false.
geometry='planar'
partitioner='planar'
prime_mesh_name='dynamics'

[!!namelist:biperiodic_deppt]
method='euler'
n_dep_pt_iterations=1

[namelist:blayer]
!!fixed_flux_e=0.0
!!fixed_flux_h=300.0
flux_bc_opt=0

[namelist:checks]
limit_cfl=.false.
!!max_cfl=0.75

[namelist:cloud]
rh_crit=98*0.96
scheme='pc2'

[namelist:convection]
cv_scheme='gregory_rowntree'
number_of_convection_substeps=2

[!!namelist:damping_layer]
dl_base=800.0
dl_str=0.5

[namelist:domain_size]
planar_domain_max_x=500.0
planar_domain_max_y=40.0
planar_domain_min_x=-500.0
planar_domain_min_y=-40.0

[namelist:extrusion]
domain_top=6000.0
method='uniform'
number_of_layers=98

[namelist:files]
ancil_directory=''
checkpoint_stem_name='$CYLC_SUITE_SHARE_DIR/data/restartLfricAtm_$ROSE_SUITE_NAME-$ROSE_TASK_NAME'
diag_stem_name='diagLfricAtm'
!!land_area_ancil_path=''
!!orography_ancil_path=''
!!soil_ancil_path=''
start_dump_directory=''
start_dump_filename=''

[namelist:finite_element]
cellshape='quadrilateral'
coordinate_order=1
element_order=0
rehabilitate=.true.
vorticity_in_w1=.false.

[namelist:formulation]
dlayer_on=.false.
dry_static_adjust=.false.
exner_from_eos=.true.
init_exner_bt=.true.
rotating=.true.
set_hydrostatic_init=.true.
shallow=.true.
si_momentum_equation=.true.
transport_only=.false.
use_moisture=.true.
use_physics=.true.
use_wavedynamics=.true.
vector_invariant=.true.

[namelist:helmholtz_solver]
gcrk=18
method='bicgstab'
normalise=.true.
preconditioner='tridiagonal'
si_pressure_maximum_iterations=400
si_pressure_tolerance=1.0e-6

[namelist:idealised]
test='none'

[namelist:initial_density]
r1=0.4
r2=0.4
!!sample_init_rho=.false.
tracer_background=0.1
tracer_max=2.0
x1=0.4
x2=-0.4
y1=0.0
y2=0.0
z1=0.0
z2=0.0

[namelist:initial_temperature]
bvf_square=0.0001
theta_surf=300.0

[namelist:initial_wind]
nl_constant=0.0
profile='constant_uv'
sbr_angle_lat=0.0
sbr_angle_lon=0.0
smp_init_wind=.false.
u0=2.0
v0=0.0
wind_time_period=0.0

[namelist:initialization]
ancil_option='none'
init_option='analytic'

[namelist:io]
checkpoint_read=$RESTART_READ
checkpoint_write=$RESTART_WRITE
diagnostic_frequency=1
!!nodal_output_on_w3=.false.
subroutine_counters=.false.
subroutine_timers=.true.
use_xios_io=.true.
write_conservation_diag=.false.
write_diag=.true.
write_dump=.false.
write_minmax_tseries=.false.

[namelist:logging]
run_log_level='info'

[namelist:microphysics]
dummy_var=0

[namelist:mixed_solver]
gcrk=18
guess_np1=.false.
normalise=.true.
reference_reset_freq=4
si_maximum_iterations=10
si_method='gcr'
si_preconditioner='pressure'
si_tolerance=1.0e-6

[namelist:mixing]
!!method='blending'
!!mix_factor=0.2
smagorinsky=.false.
viscosity=.false.
viscosity_mu=0.0

[namelist:multigrid]
l_multigrid=.false.
multigrid_chain_nitems=1
ugrid='prime'

[namelist:orbit]
!!arg_periapsis=1.796767421
!!arg_periapsis_inc=0.0
!!eccentricity=1.6710222E-02
!!eccentricity_inc=0.0
elements='earth_fixed'
!!epoch=2451545.0
!!fixed_azimuth_angle=0.0
!!fixed_zenith_angle=0.0
!!hour_angle=0.0
!!hour_angle_inc=0.0
!!mean_anomaly=-0.037278428
!!mean_anomaly_inc=0.01720278179
!!obliquity=0.0
!!obliquity_inc=0.0
observer_lat=0.0
observer_lon=0.0
!!semimajor_axis=1.0
!!semimajor_axis_inc=0.0
spin='earth_day'

[!!namelist:orographic_drag]
cd_flow_blocking=4.0
fr_crit_gwd=4.0
fr_sat_gwd=0.25
gwd_scaling=0.5
include_moisture='dry'
mountain_height_scaling=2.5
orographic_blocking_heating=.true.
orographic_gwd_heating=.true.
vertical_smoothing=.true.

[namelist:orography]
orog_init_option='none'
!!profile='none'

[!!namelist:orography_agnesi_cartesian]
direction='x'
half_width_x=10.0
half_width_y=10.0
mountain_height=100.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_agnesi_spherical]
half_width=2500.0
lambda_centre_dec=1.5
lambda_focus_dec=1.5
mountain_height=100.0
phi_centre_dec=0.0
phi_focus_dec=0.3333

[!!namelist:orography_bell_cartesian]
direction='xy'
half_width_x=1000.0
half_width_y=1000.0
mountain_height=400.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_dcmip200_spherical]
lambda_centre_dec=1.5
mountain_height=2000.0
osc_half_width_dec=0.0625
phi_centre_dec=0.0
radius_dec=0.75

[!!namelist:orography_schar_cartesian]
direction='x'
half_width_x=20.0
half_width_y=20.0
mountain_height=250.0
wavelength=20.0
x_centre=0.0
y_centre=0.0

[!!namelist:orography_schar_spherical]
half_width=5000.0
lambda_centre_dec=0.25
mountain_height=250.0
phi_centre_dec=0.0
wavelength=4000.0

[namelist:partitioning]
panel_decomposition='auto'
!!panel_xproc=1
!!panel_yproc=1

[namelist:physics]
blayer_placement='fast'
convection_placement='fast'
heldsuarez_thermo_placement=0
heldsuarez_wind_placement=0
!!hs_random=.false.
microphysics_placement='slow'
!!orographic_drag_placement='slow'
radiation_placement='slow'
sample_physics_winds=.false.
!!spectral_gwd_placement='slow'

[namelist:planet]
cp=1005.0
gravity=9.80665
omega=7.292116E-5
p_zero=100000.0
radius=6371229.0
rd=287.05
scaling_factor=1.0

[namelist:radiation]
cloud_horizontal_rsd=0.75
cloud_inhomogeneity='mcica'
cloud_overlap='exponential_random'
cloud_representation='liquid_and_ice'
cloud_vertical_decorr=10000.0
i_cloud_ice_type_lw=11
i_cloud_ice_type_sw=11
i_cloud_liq_type_lw=5
i_cloud_liq_type_sw=5
l_ch4_lw=.true.
l_ch4_sw=.true.
l_co2_lw=.true.
l_co2_sw=.true.
l_continuum_lw=.true.
l_continuum_sw=.true.
l_h2o_lw=.true.
l_h2o_sw=.true.
l_n2o_lw=.true.
l_n2o_sw=.true.
l_o2_sw=.true.
l_o3_lw=.true.
l_o3_sw=.true.
l_planet_grey_surface=.false.
l_rayleigh_sw=.true.
mcica_data_file='ga7/mcica_data'
n_radstep=1
!!planet_albedo=0.06
!!planet_emissivity=0.985
spectral_file_lw='ga7/sp_lw_ga7'
spectral_file_sw='ga7/sp_sw_ga7'

[namelist:section_choice]
aerosol='um'
boundary_layer='um'
cloud='um'
convection='um'
dynamics='gungho'
microphysics='um'
orographic_drag='none'
radiation='socrates'
spectral_gwd='none'
surface='jules'

[namelist:solver]
gcrk=18
maximum_iterations=399
method='bicgstab'
preconditioner='diagonal'
tolerance=1.0e-12

[!!namelist:spectral_gwd]
add_cgw=.false.
!!cgw_scale_factor=1.0
ussp_heating=.true.
ussp_launch_factor=1.2000
wavelstar=4300.00

[namelist:star]
stellar_constant=1361.0
stellar_radius=6.957e8

[!!namelist:subgrid]
dep_pt_stencil_extent=3
rho_approximation='ppm_no_limiter'
rho_approximation_stencil_extent=2

[namelist:surface]
surf_tile_fracs=9*0.0,1.0,0.0
use_hydrology=.true.

[namelist:time]
calendar='timestep'
timestep_end='$RESTART_STOP'
timestep_start='$RESTART_START'

[namelist:timestepping]
alpha=0.5
dt=$DT
inner_iterations=1
method='semi_implicit'
outer_iterations=4
runge_kutta_method='ssp3'
spinup_alpha=.false.
spinup_period=0.0
spinup_winds=.false.
tau_r=0.5
tau_t=0.5
tau_u=0.5

[namelist:transport]
consistent_metric=.false.
enforce_monotonicity=.false.
fv_advective_order=2
fv_flux_order=2
oned_reconstruction=.true.
operators='fv'
scheme='method_of_lines'

[namelist:well_mixed_gases]
cfc113_mix_ratio=4.826e-10
cfc11_mix_ratio=1.110e-09
cfc12_mix_ratio=2.187e-09
ch4_mix_ratio=1.006e-06
co2_mix_ratio=6.002e-04
hcfc22_mix_ratio=6.866e-10
hfc134a_mix_ratio=2.536e-10
n2_mix_ratio=0.7553
n2o_mix_ratio=4.945e-07
o2_mix_ratio=0.2314
so2_mix_ratio=0.0
