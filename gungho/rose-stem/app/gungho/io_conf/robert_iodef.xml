<?xml version="1.0" encoding="UTF-8"?>
<simulation> 

  <!-- In this version we have ONE context  -->
  
  
  <context id = "gungho_atm"> 
  
   <calendar type = "Gregorian" start_date = "2016-01-01 15:00:00" />

   <axis_definition>
    <axis id="vert_axis_node" name="levels_nodes"/>
    <axis id="vert_axis_face" name="levels_faces"/>
   </axis_definition>
   
   <domain_definition>
      <domain id="node" name="Mesh2d" nvertex="1"/>
      <domain id="face" name="Mesh2d" nvertex="4"/>
   </domain_definition>
   
   <grid_definition>
    <grid id="node_grid">
      <domain domain_ref="node"/>
      <axis axis_ref="vert_axis_node"/>
    </grid>
    <grid id="face_grid">
      <domain domain_ref="face"/>
      <axis axis_ref="vert_axis_face"/>
    </grid>
   </grid_definition>

   <field_definition prec="8" >
     <!-- Main diagnostic group -->
     <field_group freq_op="50s" enabled=".TRUE." operation="instant" >
       <field id="theta" name="theta" long_name="air_potential_temperature" standard_name="air_potential_temperature" unit="K" grid_ref="face_grid" />
       <field id="m_v" name="m_v" long_name="m_v" unit="1" grid_ref="face_grid" />
       <field id="m_c" name="m_c" long_name="m_c" unit="1" grid_ref="face_grid" />
       <field id="m_r" name="m_r" long_name="m_r" unit="1" grid_ref="face_grid" />
       <field id="m_nc" name="m_nc" long_name="m_nc" unit="1" grid_ref="face_grid" />
       <field id="m_nr" name="m_nr" long_name="m_nr"  unit="1" grid_ref="face_grid" />    
       <field id="rho" name="rho" long_name="air_density" standard_name="air_density" unit="kg m-3" grid_ref="face_grid" />
       <field id="xi1" name="xi1" long_name="Xi1" unit="s-1" grid_ref="face_grid" />
       <field id="xi2" name="xi2" long_name="Xi2" unit="s-1" grid_ref="face_grid" />
       <field id="xi3" name="xi3" long_name="Xi3" unit="s-1" grid_ref="face_grid" />
       <field id="u1" name="u1" long_name="U1" unit="m s-1" grid_ref="face_grid" />
       <field id="u2" name="u2" long_name="U2" unit="m s-1" grid_ref="face_grid" />
       <field id="u3" name="u3" long_name="U3" unit="m s-1" grid_ref="face_grid" />
       <field id="divergence" name="divergence" long_name="divergence_of_wind" standard_name="divergence_of_wind" unit="s-1" grid_ref="face_grid" />
       <field id="exner" name="exner" long_name="exner_pressure" unit="1" grid_ref="face_grid" />
     </field_group>
      <!-- Initial conditions group -->
     <field_group freq_op="1s" enabled=".TRUE." operation="once" >
       <field id="init_theta" name="theta" long_name="air_potential_temperature" standard_name="air_potential_temperature" unit="K" grid_ref="face_grid" />
       <field id="init_m_v" name="m_v" long_name="m_v" unit="1" grid_ref="face_grid" />
       <field id="init_m_c" name="m_c" long_name="m_c" unit="1" grid_ref="face_grid" />
       <field id="init_m_r" name="m_r" long_name="m_r" unit="1" grid_ref="face_grid" />
       <field id="init_m_nc" name="m_nc" long_name="m_nc" unit="1" grid_ref="face_grid" />
       <field id="init_m_nr" name="m_nr" long_name="m_nr"  unit="1" grid_ref="face_grid" />  
       <field id="init_rho" name="rho" long_name="air_density" standard_name="air_density" unit="kg m-3" grid_ref="face_grid" />
       <field id="init_xi1" name="xi1" long_name="Xi1" unit="s-1" grid_ref="face_grid" />
       <field id="init_xi2" name="xi2" long_name="Xi2" unit="s-1" grid_ref="face_grid" />
       <field id="init_xi3" name="xi3" long_name="Xi3" unit="s-1" grid_ref="face_grid" />
       <field id="init_u1" name="u1" long_name="U1" unit="m s-1" grid_ref="face_grid" />
       <field id="init_u2" name="u2" long_name="U2" unit="m s-1" grid_ref="face_grid" />
       <field id="init_u3" name="u3" long_name="U3" unit="m s-1" grid_ref="face_grid" />
       <field id="init_divergence" name="divergence" long_name="divergence_of_wind" standard_name="divergence_of_wind" unit="s-1" grid_ref="face_grid" />
       <field id="init_exner" name="exner" long_name="exner_pressure" unit="1" grid_ref="face_grid" />

     </field_group>    
     
   </field_definition>

   <file_definition 
      type="one_file" 
      par_access="collective"
      time_counter="none"
      enabled=".TRUE.">
      
      
      <file id="lfric_diag" name="lfric_diag" output_freq="50s" convention="UGRID">
        <field field_ref="theta"/>
        <field field_ref="m_v"/>
        <field field_ref="m_c"/>
        <field field_ref="m_r"/>
        <field field_ref="m_nc"/>
        <field field_ref="m_nr"/>
        <field field_ref="rho"/>
        <field field_ref="xi1"/>
        <field field_ref="xi2"/>
        <field field_ref="xi3"/>
        <field field_ref="u1"/>
        <field field_ref="u2"/>
        <field field_ref="u3"/>
        <field field_ref="divergence"/>
        <field field_ref="exner"/>
      </file> 
      
      <file id="lfric_initial" name="lfric_initial" output_freq="1s" convention="UGRID">
        <field field_ref="init_theta"/>
        <field field_ref="init_m_v"/>
        <field field_ref="init_m_c"/>
        <field field_ref="init_m_r"/>
        <field field_ref="init_m_nc"/>
        <field field_ref="init_m_nr"/>
        <field field_ref="init_rho"/>
        <field field_ref="init_xi1"/>
        <field field_ref="init_xi2"/>
        <field field_ref="init_xi3"/>
        <field field_ref="init_u1"/>
        <field field_ref="init_u2"/>
        <field field_ref="init_u3"/>
        <field field_ref="init_divergence"/>
        <field field_ref="init_exner"/>
      </file> 
   
 
    </file_definition>
    
  </context>
  
  <context id = "xios">
    <variable_definition>
      <variable_group id = "buffer">
        <variable id = "optimal_buffer_size" type = "string" >performance</variable>
        <variable id = "buffer_factor_size" type = "double" >1.0</variable>
      </variable_group>

      <variable_group id = "parameters" >
        <variable id = "using_server" type = "bool" >true</variable>
        <variable id = "info_level" type = "int" >50</variable>
        <variable id = "print_file" type="bool">true</variable>
      </variable_group>
    </variable_definition>
  </context>

</simulation>
