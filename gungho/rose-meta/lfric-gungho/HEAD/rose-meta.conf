import=infrastructure/rose-meta/lfric-infrastructure/HEAD
      =jules/rose-meta/jules-surface/HEAD
      =socrates/rose-meta/socrates-radiation/HEAD
      =um_physics/rose-meta/um-aerosol/HEAD
      =um_physics/rose-meta/um-boundary_layer/HEAD
      =um_physics/rose-meta/um-cloud/HEAD
      =um_physics/rose-meta/um-convection/HEAD
      =um_physics/rose-meta/um-microphysics/HEAD
      =um_physics/rose-meta/um-orographic_drag/HEAD
      =um_physics/rose-meta/um-spectral_gwd/HEAD

[!0.1 Namelist Maintainers]
#============================================================
# Initial developers available to maintain namelist metadata
#============================================================
# base_mesh                    | Ricky Wong
# biperiodic_deppt             | Stephen Pring
# checks                       | Ben Shipway
# damping_layer                | Ben Shipway
# extrusion                    | Thomas Melvin, Iva Kavcic
# finite_element               | Thomas Melvin
# formulation                  | Thomas Melvin
# helmholtz_solver             | Thomas Melvin
# idealised                    | Stephen Pring
# initial_density              | Stephen Pring
# initial_temperature          | Ben Shipway
# initial_wind                 | Ben Shipway
# io                           | Samantha Adams
# jules-surface                | Graham Weedon
# mixed_solver                 | Thomas Melvin
# mixing                       | Thomas Melvin, Kirsty Hanley
# multigrid                    | Ricky Wong
# orbit                        | James Manners
# orography                    | Iva Kavcic
# orography_agnesi_cartesian   | Iva Kavcic
# orography_agnesi_spherical   | Iva Kavcic
# orography_dcmip200_spherical | Iva Kavcic
# orography_schar_cartesian    | Iva Kavcic
# orography_schar_spherical    | Iva Kavcic
# partitioning                 | Mike Hobson
# physics                      | Ben Shipway
# planet                       | Thomas Melvin
# section_choice               | Ricky Wong
# socrates-radiation           | James Manners
# solver                       | Thomas Melvin
# star                         | James Manners
# subgrid                      | Stephen Pring
# submission                   | Ricky Wong
# time                         | Matthew Hambley
# timestepping                 | Thomas Melvin
# transport                    | Stephen Pring, Thomas Melvin
# um-aerosol                   | Alan J Hewitt
# um-boundary_layer            | Ian Boutle
# um-cloud                     | Kwinten Van Weverberg
# um-convection                | Ian Boutle
# um-microphysics              | Jonathan Wilkinson
# um-orographic_drag           | Annelize van Niekerk
# um-spectral_gwd              | Annelize van Niekerk
!=

#==============================================================================
# SYSTEM SETTINGS
#==============================================================================
[Submission]
ns=namelist/Job/Submission
sort-key=Section-001

#==============================================================================
# ENVIRONMENT VARIABLES AVAILABLE TO ROSE TASK
#==============================================================================
[env]
compulsory=true

[env=EXEC_NAME]
compulsory=true
description=Program executable name
sort-key=Panel-A01
type=raw

[env=OMP_NUM_THREADS]
compulsory=true
description=Number of threads for OpenMP
fail-if=this < 1 ;
range=1:
sort-key=Panel-A03
type=integer

[env=TOTAL_RANKS]
compulsory=true
description=Number of process ranks for a parallel run job
fail-if=this < 1 ;
range=1:
sort-key=Panel-A02
type=integer

[env=XIOS_SERVER_MODE]
compulsory=true
description=Run with XIOS in server mode
sort-key=Panel-A04
type=python_boolean

[env=XIOS_SERVER_RANKS]
compulsory=true
description=XIOS server process ranks
fail-if=this < 1 ;
range=1:
sort-key=Panel-A05
type=integer

#==============================================================================
# INITIAL CONDITIONS
#==============================================================================
[initial_conditions]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Initial conditions
sort-key=Section-A04

[io_checkpoint_restart]
compulsory=false
description=Settings for writing and restarting the model from checkpoints.
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=Section-A02

[io_diagnostics]
compulsory=false
description=Atmospheric model diagnostic output settings
ns=namelist/Job/IO/Diagnostics
sort-key=Section-A03

[io_dump]
compulsory=false
description=Atmospheric model dump settings
ns=namelist/Job/IO/Dumping
sort-key=Section-A03

[io_field_init]
compulsory=false
description=Settings that control how a field is initialised
ns=namelist/Job/IO/Field Initialisation
sort-key=Section-A03

[io_system]
compulsory=false
description=System related I/O for statistics and debugging
ns=namelist/Job/IO/System
sort-key=Section-A01

[jinja:suite.rc=threads]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A03

[jinja:suite.rc=wallclock]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A02

[jinja:suite.rc=xios_nodes]
compulsory=true
description=????
help=???
ns=namelist/Job/Submission
sort-key=Panel-A04

#==============================================================================
# JOB RUN
#==============================================================================
[job details]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job
sort-key=Section-A02
title=Job

[job details=end_date]
compulsory=false
type=integer

[job details=nprocessors]
compulsory=false

[job details=nsubs]
compulsory=false
range=1:
type=integer

[job details=start_date]
compulsory=false
type=integer

#==============================================================================
# MODEL SETUP
#==============================================================================
[model setup]
compulsory=false
description=??????
help=This section is for configuration of the model geometry.
ns=namelist/Model
sort-key=Section-A01
title=Model

#==============================================================================
# PRIMARY GLOBAL MESH
#==============================================================================
[namelist:base_mesh]
compulsory=true
description=Provides information to define the LFRic infrastructure principle mesh.
help=Lfric must use at least one mesh (prime) to run.
    =This panel specifies details of the mesh and its
    =configuration.
ns=namelist/Model/Mesh
sort-key=Section-A02
title=Mesh

[!namelist:base_mesh=f_lat]
compulsory=false
description=Latitude for F-plane
           =approximation [rad].
expression=namelist:base_mesh=f_lat_deg * source:constants_mod=PI / 180.0_r_def
help=Pre-set latitude for F-plane approximation [Radians]. The F-plane approximation
    =is use to calculate the Coriolis operator, where the Coriolis parameter, f, is
    =assumed to be invariant with latitude.
    =
!kind=default
type=real

[namelist:base_mesh=f_lat_deg]
compulsory=true
description=??????
fail-if=this < -90.0 ;
       =this >  90.0 ;
help=??????
    =??????
!kind=default
range=-90.0:90.0
sort-key=Panel-A06
type=real

[namelist:base_mesh=filename]
compulsory=true
description=Location of 2D global mesh.
help=Global 2D mesh file in NetCDF file format. The mesh topologies in
    =the file should be conformant to UGRID convention and must contain
    =at least one mesh topology, the prime mesh.
sort-key=Panel-A01
!string_length=filename
type=character
url=http://ugrid-conventions.github.io/ugrid-conventions

[namelist:base_mesh=fplane]
compulsory=true
description=??????
fail-if=this == true and namelist:base_mesh=geometry == "'spherical'"
help=Plane has constant f (omega)
    =fplane can not be true when nature = spherical
!kind=default
sort-key=Panel-A05
type=logical

[namelist:base_mesh=geometry]
compulsory=true
description=??????
!enumeration=true
fail-if=this == "'spherical'" and namelist:base_mesh=partitioner != "'cubedsphere'" ;
       =this == "'spherical'" and not ( env=TOTAL_RANKS % 6 == 0 or env=TOTAL_RANKS == 1 ) ;
       =this == "'planar'"    and namelist:base_mesh=partitioner != "'planar'"      ;
help=??????
    =??????
sort-key=Panel-A03
trigger=namelist:orography_agnesi_cartesian:   'planar'    ;
       =namelist:orography_bell_cartesian:     'planar'    ;
       =namelist:orography_schar_cartesian:    'planar'    ;
       =namelist:domain_size:                  'planar'    ;
       =namelist:base_mesh=fplane:             'planar'    ;
       =namelist:base_mesh=f_lat_deg:          'planar'    ;
       =namelist:orography_agnesi_spherical:   'spherical' ;
       =namelist:orography_schar_spherical:    'spherical' ;
       =namelist:orography_dcmip200_spherical: 'spherical' ;
value-titles=Planar, Spherical
values='planar', 'spherical'

[namelist:base_mesh=partitioner]
compulsory=true
description=??????
!enumeration=true
fail-if=this == "'cubedsphere'" and namelist:base_mesh=geometry != "'spherical'" ;
       =this == "'planar'"      and namelist:base_mesh=geometry != "'planar'" ;
help=??????
    =??????
sort-key=Panel-A04
value-titles=Planar, Cubedsphere
values='planar', 'cubedsphere'

[namelist:base_mesh=prime_mesh_name]
compulsory=true
description=Tag-name for prime-mesh
help=Mesh topologies are held in UGRID conformant NetCDF files. It is
    =possible that the mesh files in this format may contain more than
    =one mesh topology. This tag-name identifies the mesh topology to
    =use from the mesh file namelist:base_mesh=filename.
sort-key=Panel-A02
!string_length=default
type=character

#==============================================================================
# DEPARTURE POINTS (PLANAR) BADLY NAMED. implies it's only for bi-periodic
#==============================================================================
[namelist:biperiodic_deppt]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/biperiodic_deppt
sort-key=Section-A03
title=Departure points

[namelist:biperiodic_deppt=method]
compulsory=true
description=??????
!enumeration=true
fail-if=
help=??????
    =??????
sort-key=Panel-A01
value-titles=Eulerian, Trapezoidal, Midpoint
values='euler', 'trapezoidal', 'midpoint'

[namelist:biperiodic_deppt=n_dep_pt_iterations]
compulsory=true
description=??????
fail-if=
help=??????
    =??????
!kind=default
!range=
sort-key=Panel-A02
type=integer

#==============================================================================
# CHECKING CRITERIA
#==============================================================================
[namelist:checks]
compulsory=true
description=This namelist is used to add in runtime checks
help=See individual options for further help.
ns=namelist/Science/Dynamics/checks
sort-key=Section-A01
title=Checking criteria

[namelist:checks=limit_cfl]
compulsory=true
description=Limit the local advective Courant number
help=If true, then tests the local advective Courant number
    =and if necessary reduces the wind components to ensure
    =this doesn't exceed the limit given by max_cfl. #'
    =Note that this will change the answers and is only
    =designed to aid model development.  It should not be
    =used in operational rund.
!kind=default
sort-key=Panel-A01
trigger=namelist:checks=max_cfl: .true. ;
type=logical

[namelist:checks=max_cfl]
compulsory=true
description=Set the maximum  advective Courant number.
fail-if=this <= 0.0 ;
help=If limit_cfl=.true., then this will be used to determine the maximum advective Courant number.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real
warn-if=this > 10.0 ;

#==============================================================================
# DAMPING LAYER
#==============================================================================
[namelist:damping_layer]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/Damping layer
sort-key=Section-A02

[namelist:damping_layer=dl_base]
compulsory=true
description=??????
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=Base height of damping layer
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:damping_layer=dl_str]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Strength of damping layer
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

#==============================================================================
# 2D MESH EXTRUSION
#==============================================================================
[namelist:extrusion]
compulsory=true
description=Settings for the selected vertical mesh extrusion method.
help=Settings for the uniform, quadratic, geometric and DCMIP mesh extrusion
    =profiles to extrude 2D to 3D mesh using non-dimensional vertical coordinate.
ns=namelist/Model/Mesh/Extrusion
sort-key=Section-A03

[namelist:extrusion=domain_top]
compulsory=true
description=Domain height [m]
fail-if=this < 0.0 ;
help=Height of the model domain from a flat planet surface.
    =Height of planet surface taken as:
    = * For Cartesian domain: 0m
    = * For Spherical domain: namelist:planet=radius
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:extrusion=method]
compulsory=true
description=Extrusion method
!enumeration=true
fail-if=this == 'um_L38_29t_9s_40km' and namelist:extrusion=number_of_layers != 38
help=Available extrusion methods are (\f$n$ is number of layers):
    =1) Uniform grid spacing (\f$\frac{k}{n}\f$);
    =2) Quadratic grid spacing (\f$\frac{k}{n}^2\f$);
    =3) Geometric grid spacing (\f$d\eta = \frac{(s - 1)}{(s^{n} - 1)}$)
    =    with stretching factor prescribed (\f$s=1.03$);
    =4) DCMIP grid spacing (Ullrich et al. (2012) DCMIP documentation, Appendix F.2.)
    =    with flattening parameter prescribed.
    =5) L38 40km UM specific spacing;
sort-key=Panel-A01
value-titles=Uniform, Quadratic, Geometric, DCMIP, um_L38_29t_9s_40km
values='uniform', 'quadratic', 'geometric', 'dcmip', 'um_L38_29t_9s_40km'

[namelist:extrusion=number_of_layers]
compulsory=true
description=Number of layers in the vertical
fail-if=this < 1 ;
help=Setting for number of layers of 3D-mesh in vertical.
!kind=default
range=1:
sort-key=Panel-A03
type=integer

[namelist:files]
compulsory=true
description=Sets up options for files
help=??????
    =??????
ns=namelist/Job/IO
sort-key=sec-AAAA

[namelist:files=ancil_directory]
compulsory=true
description=Directory for ancillary files
help=Path to the directory where LFRic ancillaries are stored
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=checkpoint_stem_name]
compulsory=true
description=Filename stem for checkpoint files
help=Filename stem for checkpoint files
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=A-007
!string_length=filename
type=character

[namelist:files=diag_stem_name]
compulsory=true
description=Filename stem for diagnostic files
help=Filename stem for diagnostic files
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A02
!string_length=filename
type=character

[namelist:files=land_area_ancil_path]
compulsory=true
description=Path to land area fraction file from ancillary files directory
help=This file contains the binary land area fraction data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=orography_ancil_path]
compulsory=true
description=Path to orography file from ancillary files directory
help=This file contains global surface altitude information used for orography
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=soil_ancil_path]
compulsory=true
description=Path to soil file from ancillary files directory
help=This file contains the soil data
ns=namelist/Job/IO/Ancils
!string_length=filename
type=character

[namelist:files=start_dump_directory]
compulsory=true
description=Directory for start dumps
help=??????
ns=namelist/Job/IO/Dumping
!string_length=filename
type=character

[namelist:files=start_dump_filename]
compulsory=true
description=Filename for start dump
help=??????
ns=namelist/Job/IO/Dumping
!string_length=filename
type=character

#==============================================================================
# FINITE ELEMENT
#==============================================================================
[namelist:finite_element]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Model/Finite element
sort-key=Section-A01
title=Finite element

[namelist:finite_element=cellshape]
compulsory=true
description=??????
!enumeration=true
fail-if=this != "'quadrilateral'" ;
help=??????
    =??????
sort-key=Panel-A01
value-titles=Triangluar, Quadrilateral
values='triangle', 'quadrilateral'

[namelist:finite_element=coordinate_order]
compulsory=true
description=??????
fail-if=this < 0 ;
help=Order of the coordinate space
!kind=default
range=0:
sort-key=Panel-A03
type=integer

[namelist:finite_element=element_order]
compulsory=true
description=??????
fail-if=this < 0 ;
help=Order of the function space
!kind=default
range=0:
sort-key=Panel-A02
type=integer

[!namelist:finite_element=nqp_exact]
compulsory=false
expression=namelist:finite_element=element_order + 3
help=Number of quadrature points needed to exactly integrate a product of test & trial functions with a linear Jacobian
!kind=default
sort-key=Panel-A07
type=integer

[namelist:finite_element=rehabilitate]
compulsory=true
description=??????
help=Rehabilitation is the modification of mapping for
    =the W3 space and the divergence mapping so that
    =the correct order of accuracy is maintained on
    =non-affine elements. For affine elements it is not
    =required. This is included here as in the future
    =we wish to move to not rehabilitating
!kind=default
sort-key=Panel-A04
type=logical

[namelist:finite_element=vorticity_in_w1]
compulsory=true
description=??????
help=Compute the vorticity in W1 (or implied W2) space
!kind=default
sort-key=Panel-A06
type=logical

#==============================================================================
# Science-level panels
#==============================================================================
[namelist:formulation]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Science/Dynamics
sort-key=Section-A06
title=Dynamics

[namelist:formulation=dlayer_on]
compulsory=true
description=??????
help=Use damping layer yes/no
!kind=default
ns=namelist/Science/Dynamics
sort-key=Panel-A07
trigger=namelist:damping_layer: .true. ;
type=logical

[namelist:formulation=dry_static_adjust]
compulsory=true
description=??????
help=Dry static adjustment of reference profile
!kind=default
sort-key=Panel-A06
type=logical

[namelist:formulation=exner_from_eos]
compulsory=true
description=Recompute Exner pressure after each solve
help=Diagnose the Exner pressure function from the equation of state
    =after each mixed solve
!kind=default
sort-key=Panel-A11
type=logical

[namelist:formulation=init_exner_bt]
compulsory=true
description=??????
help=Initialize exner hydrostatically bottom to top
!kind=default
sort-key=Panel-A10
type=logical

[namelist:formulation=rotating]
compulsory=true
description=??????
help=Turn on/off Coriolis terms
!kind=default
sort-key=Panel-A03
type=logical

[namelist:formulation=set_hydrostatic_init]
compulsory=true
description=??????
help=Hydrostatic initialization of variable
!kind=default
sort-key=Panel-A12
trigger=namelist:initial_density=sample_init_rho: .false. ;
type=logical

[namelist:formulation=shallow]
compulsory=true
description=??????
help=Run in shallow atmosphere mode
!kind=default
sort-key=Panel-A04
type=logical

[namelist:formulation=si_momentum_equation]
compulsory=true
description=Use a semi-implicit or explicit computation
           =of the momentum equation.
help=Set .true. to use semi-implicit or
    =set .false. to use an explicit treatment
!kind=default
sort-key=Panel-A13
type=logical

#==============================================================================
# DYNAMICS
#==============================================================================
#
#==============================================================================
# FORMULATION
#==============================================================================
[namelist:formulation=transport_only]
compulsory=true
description=??????
fail-if=this == true and namelist:transport=scheme == "'method_of_lines'" and namelist:timestepping=method == "'semi-implicit'"
help=Solve the transport equation only
!kind=default
sort-key=Panel-A02
type=logical

[namelist:formulation=use_moisture]
compulsory=true
description=??????
help=Use moisture variables.
!kind=default
ns=namelist/Science
sort-key=Panel-A02
trigger=namelist:section_choice=aerosol:      .true. ;
       =namelist:section_choice=cloud:        .true. ;
       =namelist:section_choice=microphysics: .true. ;
type=logical

[namelist:formulation=use_physics]
compulsory=true
description=Use subgrid physics parametrizations or forcing terms
help=Use subgrid physics parametrizations or forcing terms
!kind=default
ns=namelist/Science
sort-key=Panel-A01
trigger=namelist:section_choice=aerosol:          .true. ;
       =namelist:section_choice=boundary_layer:   .true. ;
       =namelist:section_choice=cloud:            .true. ;
       =namelist:section_choice=microphysics:     .true. ;
       =namelist:section_choice=orographic_drag:  .true. ;
       =namelist:section_choice=radiation:        .true. ;
       =namelist:section_choice=spectral_gwd:     .true. ;
       =namelist:section_choice=surface:          .true. ;
type=logical

[namelist:formulation=use_wavedynamics]
compulsory=true
description=??????
help=Use wave dynamics
!kind=default
sort-key=Panel-A05
type=logical

[namelist:formulation=vector_invariant]
compulsory=true
description=Use a vector invariant or advective form
           =for the momentum equation.
help=Set .true. to use vector invariant or
    =set .false. to use advective
!kind=default
sort-key=Panel-A14
type=logical

#==============================================================================
# HELMHOLTZ SOLVER
#==============================================================================
[namelist:helmholtz_solver]
compulsory=true
description=??????
help=This namelist contains the options for the preconditioner (helmholtz) solver
!kind=default
ns=namelist/Science/Dynamics/helmholtz solver
sort-key=Section-A08
title=Pre-conditioner solver

[namelist:helmholtz_solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A06
type=integer

[namelist:helmholtz_solver=method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A01
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi
values='bicgstab', 'cg', 'gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi'

[namelist:helmholtz_solver=normalise]
compulsory=true
description=??????
help=Normalise Helmholtz matrix by its approximate diagonal
!kind=default
sort-key=Panel-A05
type=logical

[namelist:helmholtz_solver=preconditioner]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A03
value-titles=None, Diagonal, Tridiagonal, Multigrid
values='none', 'diagonal', 'tridiagonal', 'multigrid'

[namelist:helmholtz_solver=si_pressure_maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for si preconditioner solver
!kind=default
range=1:
sort-key=Panel-A04
type=integer

[namelist:helmholtz_solver=si_pressure_tolerance]
compulsory=true
description=??????
help=Relative tolerance of semi-implicit pressure solver
!kind=default
sort-key=Panel-A02
type=real

#==============================================================================
# IDEALISED CASES
#==============================================================================
[namelist:idealised]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions

[namelist:idealised=test]
compulsory=true
description=??????
!enumeration=true
fail-if=this == "'yz_cosine_hill'"    and namelist:base_mesh=geometry == "'spherical'" and namelist:formulation=transport_only != ".true." ;
       =this == "'cold_bubble_x'"     and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'cold_bubble_y'"     and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'warm_bubble'"       and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'warm_bubble_3d'"    and namelist:base_mesh=geometry == "'spherical'" ;
       =this == "'hadley_like_dcmip'" and namelist:base_mesh=geometry == "'planar'" and namelist:formulation=transport_only != ".true."    ;
       =this == "'held_suarez'"       and namelist:base_mesh=geometry == "'planar'"    ;
       =this == "'vortex_field'"      and namelist:base_mesh=geometry == "'planar'" and namelist:formulation=transport_only != ".true."    ;
       =this == "'deep_baroclinic_wave'"    and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'solid_body_rotation'"     and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'solid_body_rotation_alt'" and namelist:base_mesh=geometry == "'planar'" ;
       =this == "'cosine_hill'"             and namelist:formulation=transport_only != ".true." ;
       =this == "'cosine_stripe'"           and namelist:formulation=transport_only != ".true." ;
       =this == "'costant_field'"           and namelist:formulation=transport_only != ".true." ;
       =this == "'slotted_cylinder'"        and namelist:formulation=transport_only != ".true." ;
       =this == "'guassian_hill'"           and namelist:formulation=transport_only != ".true." ;
       =this == "'cos_phi'"                 and namelist:base_mesh=geometry == "'planar'" and namelist:formulation=transport_only != ".true." ;
       =this == "'cosine_bubble'"           and namelist:base_mesh=geometry == "'spherical'" and namelist:formulation=transport_only != ".true." ;
help=gravity_wave            : Gravity wave test (planar|spherical)
    =isot_atm                : Isothermal atmosphere
    =isot_mild_atm           : Isothermal atmosphere, mild ground temperature
    =isot_cold_atm           : Isothermal atmosphere, cold ground temperature
    =cold_bubble_x           : Straka density cold current test in x direction (planar)
    =cold_bubble_y           : Straka density cold current test in y direction (planar)
    =const_lapse_rate        : const_lapse_rate : Stratified atmosphere, constant lapse rate
    =warm_bubble             : Warm bubble test (planar)
    =warm_bubble_3d          : 3d Warm bubble test (planar)
    =gaussian_hill           : Pair of Gaussian hills (planar|spherical)
    =cosine_hill             : Pair of cosine hills (planar|spherical)
    =yz_cosine_hill          : Pair of cosine hills (in a y-z slice of the planar domain)
    =slotted_cylinder        : Pair of slotted cylinders (planar|spherical)
    =constant_field          : Constant density value everywhere (planar|spherical)
    =cosine_stripe           : Cosine profile which is a function of longitude only (planar|spherical)
    =vortex_field            : Pair of vortices (spherical)
    =hadley_like_dcmip       : Hadley-like DCMIP test (spherical)
    =held_suarez             : Held-Suarez idealised initialization
    =solid_body_rotation     : Solid body rotation test
    =solid_body_rotation_alt : Switchable deep/shallow solid body rotation test
    =deep_baroclinic_wave    : Deep atmosphere baroclinic wave (Ullrich 13)
    =isentropic              : Stationairy isentropic case
    =dry_cbl                 : Dry convective boundary layer
    =_____________________________________________________________________
    =snow
    = Initialises a GABLS4-inspired snowpack under the atmospheric profile
    = of the dry_cbl test.
    = Test is to check the coupling of the snow scheme against the UM-SCM
    = and has no real scientific meaning.
    =_____________________________________________________________________
    =shallow_conv            : Shallow convection
    = cos_phi                : Advection of latitudinally varying function
    = cosine_bubble          : Advection of a cosine bubble in an x-z domain
sort-key=Panel-A01
value-titles=None, Gravity Wave, Isothermal atmosphere, Mild ground temperature,
            =Cold ground temperature, Cold bubble x,
            =Cold bubble y, Constant lapse rate, Warm bubble, Warm bubble 3d, Gaussian hill,
            =Cosine hill, YZ cosine hill, Slotted cylinder, Constant field, Cosine stripe,
            =Hadley like DCMIP, Vortex field, Held-Suarez, Solid body rotation,
            =Solid body rotation alt, Deep baroclinic wave, Isentropic,
            =Dry convective boundary layer, Shallow Convection,
            =Advection of cos(phi) function, Advection of a cosine bubble, Snow under dry CBL
# initial temp namelists
# XS
# trigger=namelist:initial_density:     'none' ;
#         namelist:initial_temperature: 'none' ;
#         namelist:initial_wind:        'none' ;
values='none', 'gravity_wave', 'isot_atm', 'isot_mild_atm', 'isot_cold_atm', 'cold_bubble_x',
      ='cold_bubble_y', 'const_lapse_rate', 'warm_bubble', 'warm_bubble_3d', 'gaussian_hill',
      ='cosine_hill', 'yz_cosine_hill', 'slotted_cylinder', 'constant_field', 'cosine_stripe',
      ='hadley_like_dcmip', 'vortex_field', 'held_suarez', 'solid_body_rotation',
      ='solid_body_rotation_alt', 'deep_baroclinic_wave', 'isentropic',
      ='dry_cbl','shallow_conv','cos_phi','cosine_bubble','snow'

#==============================================================================
# INITIAL DENSITY
#==============================================================================
[namelist:initial_density]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Density
sort-key=Section-A01

[namelist:initial_density=r1]
compulsory=true
description=??????
# fail-if= only valid for certain tests
fail-if=this < 0.0 ;
# Poor, variables should not change units based on other settings!!
help=Radius for one of the pair of initial tracer functions
    =Biperiodic domain: in metres.
    =Cubed sphere domain: in radians.
!kind=default
range=0.0:
#range=
sort-key=Panel-A04
type=real

[namelist:initial_density=r2]
compulsory=true
description=??????
fail-if=
help=Radius parameter for the second of the pair of initial tracer functions (see r1)
!kind=default
!range=
sort-key=Panel-A08
trigger=
type=real

[namelist:initial_density=sample_init_rho]
compulsory=true
description=??????
help=Use sampling initialize rho true/false
!kind=default
sort-key=Panel-A01
type=logical

[namelist:initial_density=tracer_background]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Background value of tracer (unclear)
!kind=default
range=0.0:
sort-key=Panel-A03
# This variable is only valid for the following idealised test cases: cosine_hill, yz_cosine_hill,
# slotted_cylinder, cosine_stripe, constant_field
type=real

[namelist:initial_density=tracer_max]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Maximum value of tracer (unclear)
!kind=default
range=0.0:
sort-key=Panel-A02
# trigger= only valid for some of idealised test cases namelist:idelaised=test Add comments as to which
# This variable is only valid for the following idealised test cases: gaussian_hill, cosine_hill,
# yz_cosine_hill, slotted_cylinder, cosine_stripe,
type=real

[namelist:initial_density=x1]
compulsory=true
description=??????
# trigger= only valid for some of idealised test cases namelist:idelaised=test Add comments as to which
# A change in the way it is coded is needed as x1 is required for several of the idealised tests but need
# not be.
# Poor, variables should not change units based on other settings!!
help=Position for one of the pair of initial tracer functions
    =Biperiodic domain: centre of the function given in terms of metres in the chi1 direction.
    =Cubed sphere domain: longitudinal position of the centre of the function (a value between 0 and \f$2\pi\f$).
!kind=default
#range=
sort-key=Panel-A05
trigger=
type=real

[namelist:initial_density=x2]
compulsory=true
description=??????
fail-if=
help=Position parameter for the second of the pair of initial tracer functions (see x1)
!kind=default
!range=
sort-key=Panel-A09
trigger=
type=real

[namelist:initial_density=y1]
compulsory=true
description=??????
fail-if=
# A change in the way it is coded is needed as y1 is required for several of the idealised tests but need
# not be.
# Poor, variables should not change units based on other settings!!
help=Position for one of the pair of initial tracer functions
    =Biperiodic domain: centre of the function given in terms of metres in the chi2 direction.
    =Cubed sphere domain: latitudinal position of the centre of the function (a value between \f$-\pi/2\f$ and \f$\pi/2\f$).
!kind=default
!range=
sort-key=Panel-A06
trigger=
type=real

[namelist:initial_density=y2]
compulsory=true
description=??????
fail-if=
help=Position parameter for the second of the pair of initial tracer functions (see y1)
!kind=default
!range=
sort-key=Panel-A10
trigger=
type=real

[namelist:initial_density=z1]
compulsory=true
description=??????
fail-if=
help=Centre height position for one of the pair of initial tracer functions
!kind=default
!range=
sort-key=Panel-A07
trigger=
# Only valid for yz_cosine_hill
type=real

[namelist:initial_density=z2]
compulsory=true
description=??????
fail-if=
help=Centre height position for one of the pair of initial tracer functions
!kind=default
!range=
sort-key=Panel-A11
# Only valid for yz_cosine_hill
trigger=
type=real

#==============================================================================
# INITIAL TEMPERATURE
#==============================================================================
[namelist:initial_temperature]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Temperature
sort-key=Section-A02

[namelist:initial_temperature=bvf_square]
compulsory=true
description=??????
help=The square of Brunt-Vaisala frequency [1/s^2]
!kind=default
sort-key=Panel-A01
type=real

[namelist:initial_temperature=theta_surf]
compulsory=true
description=??????
help=Value of temperature at z=0
!kind=default
range=0.0:
sort-key=Panel-A02
type=real
warn-if=this <= 0.0 ;

#==============================================================================
[namelist:initial_wind]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
ns=namelist/Job/Initial conditions/Wind
sort-key=Section-A03

[namelist:initial_wind=nl_constant]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A07
type=real

[namelist:initial_wind=profile]
compulsory=true
description=??????
!enumeration=true
help=Deep and shallow solid-body rotation
sort-key=Panel-A01
value-titles=None, Solid body rotation, Solid body rotation-alt, Constant uv, Constant shear uv,
            =Sin wave uv, DCMIP 3.0.1, Deep baroclinic-steady, Deep baroclinic-perturbed,
            =NL case-1, NL case-2, NL case-3, NL case-4, xy NL case-1, yz NL case-1,
            =Hadley like DCMIP, Vortex,
            =Solid body rotation-Streamfunction, DCMIP 3.0.1-Streamfunction
# PLEASE add coments to indicate which of these values should allowed given
# the value of namelist:idealised=test
# the value of the mesh geometry
values='none', 'solid_body_rotation', 'solid_body_rotation_alt', 'constant_uv', 'constant_shear_uv',
      ='sin_uv','dcmip301', 'deep_baroclinic_steady', 'deep_baroclinic_perturbed',
      ='NL_case_1', 'NL_case_2', 'NL_case_3', 'NL_case_4', 'xy_NL_case_1', 'yz_NL_case_1',
      = 'hadley_like_dcmip', 'vortex', 'sbr_streamfunction', 'dcmip301_streamfunction'

[namelist:initial_wind=sbr_angle_lat]
#Units? Degrees radians []??
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A04
type=real

[namelist:initial_wind=sbr_angle_lon]
#Units? Degrees radians []??
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A05
type=real

[namelist:initial_wind=shear]
compulsory=false
description=Shear value used to initialise wind
help=This value is used to initialise constant_shear_uv
    =Wind profile is computed using:
    =u(z) = u0*z/shear
!kind=default
sort-key=Panel-A09
type=real

[namelist:initial_wind=smp_init_wind]
compulsory=true
description=sample initial wind or not.
help=??????
    =??????
!kind=default
sort-key=Panel-A08
type=logical

[namelist:initial_wind=u0]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A02
type=real

[namelist:initial_wind=v0]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A03
type=real

[namelist:initial_wind=wavelength]
compulsory=false
description=Wavelength used in sin_uv wind profile
help=Wavelength for sin uv profile
    =Wind profile is computed using:
    =u(z) = u0*sin(2pi*k_z), where k_z = 2*pi/wavelength
!kind=default
sort-key=Panel-A10
type=real

[namelist:initial_wind=wind_time_period]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=??????
    =??????
!kind=default
range=0.0:
sort-key=Panel-A06
type=real

#==============================================================================
# Field Initialization
#==============================================================================
[namelist:initialization]
compulsory=true
description=Sets up options for field initialization
help=??????
    =??????
ns=namelist/Job/IO/Field Initialisation
sort-key=sec-AAAA

[namelist:initialization=ancil_option]
compulsory=true
description=Choice for which ancillaries to read in
!enumeration=true
!fail-if=this='prototype_gagl'
        =this='basic_gagl' and namelist:orography=orog_init_option != 'ancil'
        =this='prototype_gagl' and namelist:orography=orog_init_option != 'ancil'
help=Currently support is only available for:
    =     'none', 'analytic', 'aquaplanet', 'basic_gagl'
sort-key=01
trigger=namelist:files=orography_ancil_path: 'basic_gagl' ;
       =namelist:files=land_area_ancil_path: 'basic_gagl' ;
       =namelist:files=soil_ancil_path: 'basic_gagl' ;
values='none', 'analytic', 'aquaplanet', 'basic_gagl', 'prototype_gagl'

[namelist:initialization=init_option]
compulsory=true
description=Choice for initialization of model fields
!enumeration=true
!fail-if=this='checkpoint_dump' and namelist:io=checkpoint_read==.false.
help=Choose how to initialize the model fields:
    = 'analytic'        : Initialization is taken from analytic fields.  See
    =                     the appropriate related namelists for choices available.
    = 'checkpoint_dump' : Initialize the model from a checkpoint from a previous
    =lfric run.
    = 'fd_start_dump'   : Initialize fields from a start dump file on disk.
    =The data in this file will be used to populate finite
    =difference fields, i.e. physics fields from which the
    =model will run.
    = 'fe_start_dump'   : Initialize fields from a start dump file on disk.  The
    =data in this file will be used to populate finite element
    =fields, i.e. gungho dynamics fields from which the model
    =will run. NOT CURRENTLY IMPLEMENTED
sort-key=01
!trigger=namelist:io=start_dump_directory:  'fd_start_dump', 'fe_start_dump'  ;
values='analytic', 'checkpoint_dump', 'fd_start_dump', 'fe_start_dump'

#==============================================================================
# IO
#==============================================================================
[namelist:io]
compulsory=true
description=Sets I/O options for diagnostic output, checkpointing and dumps
help=??????
ns=namelist/Job/IO
sort-key=Section-A02
title=I/O

# User ignored
# Checkpoint frequency is something we will want in future so it
# has been deliberately user-ignored so it is not forgotten
[!namelist:io=checkpoint_frequency]
compulsory=true
description=Frequency of checkpoint file write
fail-if=this < 1 ;
help=Note this option is currently not used. If requested checkpoint files
    =are only written at the end of a run
!kind=default
ns=namelist/Job/IO/Checkpointing & Restart
range=1:
sort-key=Panel-A00
type=integer

[namelist:io=checkpoint_read]
compulsory=true
description=Enable read of a checkpoint file
help=Read the checkpoint file specified by the checkpoint
    =stem name (namelist:io=checkpoint_stem_name)
    =and start timestep (namelist:time=timestep_start).
!kind=default
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=Panel-A02
type=logical

[namelist:io=checkpoint_write]
compulsory=true
description=Enable write of a checkpoint file
help=Write a checkpoint file specified by checkpoint
    =stem name (namelist:io=checkpoint_stem_name)
    =and end timestep (namelist:time=timestep_end).
!kind=default
ns=namelist/Job/IO/Checkpointing & Restart
sort-key=Panel-A03
!trigger=namelist:io=checkpoint_frequency: .true. ;
type=logical

[namelist:io=diagnostic_frequency]
compulsory=true
description=Frequency of diagnostic output [timesteps]
fail-if=this < 1 ;
help=Frequency of diagnostic output [timesteps]
!kind=medium
ns=namelist/Job/IO/Diagnostics
range=1:
sort-key=Panel-A03
type=integer

[namelist:io=nodal_output_on_w3]
compulsory=true
description=Enable projection of fields to
           =W3 for nodal diagnostic output
help=This option creates diagnostic output of fields on W3 in addition to their native function spaces.
    =It only applies to the old nodal style ouput. i.e. if write_diag is .true. and use_xios_io is .false.
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A04
type=logical

[namelist:io=subroutine_counters]
compulsory=true
description=Enable output of subroutine counters
help=Writes out subroutine counters to test file
!kind=default
ns=namelist/Job/IO/System
sort-key=Panel-A03
type=logical

[namelist:io=subroutine_timers]
compulsory=true
description=Enable output of subroutine runtimes
help=Writes out subroutine run times to text file
!kind=default
ns=namelist/Job/IO/System
sort-key=Panel-A02
type=logical

[namelist:io=use_xios_io]
compulsory=true
description=Use XIOS for all I/O
           =(where there is a choice of methods)
help=Currently we still have some legacy I/O methods for diagnostic output
    =and checkpointing. This option forces use of XIOS.
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A06
trigger=namelist:io=nodal_output_on_w3: .false. ;
       =env=XIOS_SERVER_MODE:           .true.  ;
       =env=XIOS_SERVER_RANKS:          .true.  ;
type=logical

[namelist:io=write_conservation_diag]
compulsory=true
description=Enable write of conservation diagnostics for masses, energy and axial ang. mom.
help=Writes out conservation diagnostics to the job log. These are the totals of
    =dry mass, energy and axial angular momentum. In the presence of moisture,
    =the total mass of each species of moisture is also written out as well as
    =the masses of water associated with fluxes from precipitation and the boundary layer.
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A05
type=logical

[namelist:io=write_diag]
compulsory=true
description=Enable diagnostic output
help=Writes diagnostic output to file at the specified diagnostic frequency
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A01
trigger=namelist:io=diagnostic_frequency: .true. ;
       =namelist:io=nodal_output_on_w3:   .true. ;
       =namelist:io=write_minmax_tseries: .true. ;
       =namelist:files=diag_stem_name:    .true. ;
type=logical

[namelist:io=write_dump]
compulsory=true
description=Enable dump of a field
help=Write a dump of a field
!kind=default
ns=namelist/Job/IO/Dumping
sort-key=A-001
type=logical

[namelist:io=write_minmax_tseries]
compulsory=true
description=Enable write of maxima and minima
           =of fields for time-series.
help=Writes out a min/max of fields to text file
!kind=default
ns=namelist/Job/IO/Diagnostics
sort-key=Panel-A05
type=logical

#==============================================================================
# OUTER SOLVER
#==============================================================================
[namelist:mixed_solver]
compulsory=true
description=??????
help=This namelist is for the mixed (outer) si solver
ns=namelist/Science/Dynamics/mixed_solver
sort-key=Section-A07
title=Outer solver

[namelist:mixed_solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A05
type=integer

[namelist:mixed_solver=guess_np1]
compulsory=true
description=??????
help=Guess values for theta, rho and exner n+1 in inner loop
!kind=default
sort-key=Panel-A06
type=logical

[namelist:mixed_solver=normalise]
compulsory=true
description=??????
help=Normalise matrix so diagonal is 1
!kind=default
sort-key=Panel-A08
type=logical

[namelist:mixed_solver=reference_reset_freq]
compulsory=true
description=??????
fail-if=this < 1 ;
help=frequency (number of si iterations) to reset reference state
!kind=default
range=1:
sort-key=Panel-A07
type=integer

[namelist:mixed_solver=si_maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for si solver
!kind=default
range=1:
sort-key=Panel-A04
type=integer

[namelist:mixed_solver=si_method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
!kind=default
sort-key=Panel-A01
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi
values='bicgstab', 'cg', 'gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi'

[namelist:mixed_solver=si_preconditioner]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
!kind=default
sort-key=Panel-A03
value-titles=None, Diagonal, Pressure
values='none', 'diagonal', 'pressure'

[namelist:mixed_solver=si_tolerance]
compulsory=true
description=??????
help=Relative tolerance of semi-implicit solver
!kind=default
sort-key=Panel-A02
type=real

[namelist:mixing]
compulsory=true
description=Subgrid mixing scheme options
help=Currently available schemes are:
    =_________________________________________________________________
    =Constant viscosity:
    =  applied to theta & u, v, w
    =_________________________________________________________________
    =Smagorinsky mixing scheme:
    =  applied to theta, moisture (water vapour and cloud liquid),
    =  u, v and w
!kind=default
ns=namelist/Science/Dynamics/Mixing
sort-key=Section-A05

[namelist:mixing=method]
compulsory=true
description=Smagorinsky subgrid mixing scheme option
!enumeration=true
help=Options for Smagorinsky subgrid mixing scheme:
    =_________________________________________________________________
    =3D Smag
    =  Smagorinsky mixing scheme applied in horizontal and vertical.
    =_________________________________________________________________
    =2D Smag + 1D BL
    =  Smagorinsky mixing scheme applied in horizontal.
    =  1D BL scheme used in the vertical.
    =_________________________________________________________________
    =Blended scheme
    =  Blended BL-Smagorinsky diffusion coefficient used for
    =  subgrid mixing in horizontal and vertical.
    =
    =  WARNING: This option currently does not conserve energy and as
    =  a result may be unstable.
sort-key=Panel-A05
value-titles=3D Smagorinsky, 2D Smagorinsky + 1D BL, Blended scheme
values='3d_smag', '2d_smag', 'blending'

[namelist:mixing=mix_factor]
compulsory=true
description=Smagorinsky mixing length constant
help=Smagorinsky mixing length constant, typical value is 0.2
!kind=default
sort-key=Panel-A04
type=real

[namelist:mixing=smagorinsky]
compulsory=true
description=Enable Smagorinsky mixing
help=Apply Smagorinsky mixing to theta,
    =  moisture (water vapour and cloud liquid), u, v and w
    =
    =  NOTE: As in the current UM implementation of Smagorinsky mixing,
    =  the stress terms have been implemented purely as diffusion terms.
    =  This results in a missing term, as described in UMDP28.
    =
    =  WARNING: Current implementation assumes a Cartesian mesh.
!kind=default
sort-key=Panel-A03
trigger=namelist:mixing=method:     .true. ;
       =namelist:mixing=mix_factor: .true. ;
type=logical

#==============================================================================
# MIXING: Namelist Members
#==============================================================================
[namelist:mixing=viscosity]
compulsory=true
description=??????
help=Apply constant viscosity to theta & u, v, w
!kind=default
sort-key=Panel-A01
type=logical

[namelist:mixing=viscosity_mu]
compulsory=true
description=??????
help=Viscosity constant to use
!kind=default
sort-key=Panel-A02
type=real

#=================
# Multigrid Mesh =
#=================
#==============================================================================
# MULTIGRID
#==============================================================================
[namelist:multigrid]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/multigrid
sort-key=Section-A06
title=Multi-grid

[namelist:multigrid=l_multigrid]
compulsory=true
description=??????
help=Enable/Disable multigrid scheme
!kind=default
ns=namelist/Science/Dynamics
sort-key=Panel-A01
type=logical

[namelist:multigrid=multigrid_chain_nitems]
compulsory=true
description=Number of items in multigrid function space chain
fail-if=this < 1 ;
help=??????
    =??????
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:multigrid=n_coarsesmooth]
compulsory=false
type=integer

[namelist:multigrid=n_postsmooth]
compulsory=false
type=integer

[namelist:multigrid=n_presmooth]
compulsory=false
type=integer

[namelist:multigrid=smooth_relaxation]
compulsory=false
type=real

[namelist:multigrid=ugrid]
!bounds=namelist:multigrid=multigrid_chain_nitems
compulsory=true
description=Global ugrid files used by function space chain.
fail-if=len(this) != namelist:multigrid=multigrid_chain_nitems ;
       =this(1)   != "'prime'"
help=At present the 1st file must be the prime mesh, specify using 'prime'
length=:
sort-key=Panel-A03
!string_length=filename
type=character

#==============================================================================
# ORBIT
#==============================================================================
[namelist:orbit]
compulsory=true
description=Orbital elements
ns=namelist/Model/Planet/Orbit
sort-key=Section-A05
title=Orbit

[namelist:orbit=arg_periapsis]
compulsory=true
description=Argument of periapsis [radians]
help=The angle between the ascending node and the periapsis (anticlockwise).
    =
    =The ascending node in this context is the point in the orbit where the
    =planet passes through its autumn equinox for the northern hemisphere.
    =The direction from the star to planet at this point in the orbit is the
    =zero of the reference frame used here for the orbital elements.
    =This direction is also where the host star appears in the sky as viewed
    =from the planet at its northern hemisphere spring equinox. For the Earth
    =this is known as the First Point of Aries.
    =(Note, for a planet with zero obliquity, this zero direction is
    =arbitrarily defined.)
    =
    =The periapsis is the point of closest approach in the planet's
    =elliptical orbit. For a circular orbit it is undefined
    =(can be set to zero.)
    =
    =As we are using the ascending node as the zero point for the reference
    =frame here, then by definition, the longitude of the ascending node is
    =zero, and the argument of periapsis is equal to the longitude of
    =periapsis. For a planet around the sun this is known as the longitude
    =of perihelion.
sort-key=Panel-A06
type=real

[namelist:orbit=arg_periapsis_inc]
compulsory=true
description=Increment to the argument of periapsis
           =per Julian day from epoch [radians/day]
sort-key=Panel-A07
type=real

[namelist:orbit=eccentricity]
compulsory=true
description=Orbital Eccentricity [unitless]
help=The orbital eccentricity determines the amount by which the orbit
    =deviates from a perfect circle. A value of 0 is a circular orbit,
    =values between 0 and 1 form an elliptic orbit, 1 is a parabolic
    =escape orbit, and greater than 1 is a hyperbola.
range=0.0:1.0
sort-key=Panel-A04
type=real

[namelist:orbit=eccentricity_inc]
compulsory=true
description=Increment to eccentricity
           =per Julian day from epoch [/day]
sort-key=Panel-A05
type=real

[namelist:orbit=elements]
compulsory=true
description=Orbital parameters
!enumeration=true
help=Parameters for the planet's orbit may be user-defined
    =or given by the following presets:
    =_________________________________________________________________
    =Earth: Fixed
    =  A standard Earth orbit that does not vary from one year to the next.
    =  The day number of the passage through perihelion is set to a mean
    =  value for the years 1995-2005.
    =  As the orbit is reset at the beginning of each year there will be a
    =  slight discontinuity in the orbital position. The epoch used is
    =  therefore always midday on the first day of the current year.
    =  The orbital elements used are taken from JPL and the Astronomical
    =  Almanac (1984) and equivalent to:
    =    eccentricity = 1.6710222E-02
    =    eccentricity_inc = 0.0
    =    arg_periapsis = 1.796767421
    =    arg_periapsis_inc = 0.0
    =    obliquity = 0.409092804
    =    obliquity_inc = 0.0
    =    semimajor_axis = 1.0
    =    semimajor_axis_inc = 0.0
    =    mean_anomaly = -0.037278428
    =    mean_anomaly_inc = 0.01720278179
    =    hour_angle = 0.0
    =_________________________________________________________________
    =Earth: Secular variation
    =  An Earth orbit with secular variations of the orbital elements
    =  described by A. L. Berger (1978), J. Atm. Sci., vol 35, p. 2362.
    =  These use higher order terms than the simple linear increments
    =  available with the user defined orbital elements.
sort-key=Panel-A01
trigger=namelist:orbit=epoch: 'user' ;
       =namelist:orbit=eccentricity: 'user' ;
       =namelist:orbit=eccentricity_inc: 'user' ;
       =namelist:orbit=arg_periapsis: 'user' ;
       =namelist:orbit=arg_periapsis_inc: 'user' ;
       =namelist:orbit=obliquity: 'user' ;
       =namelist:orbit=obliquity_inc: 'user' ;
       =namelist:orbit=semimajor_axis: 'user' ;
       =namelist:orbit=semimajor_axis_inc: 'user' ;
       =namelist:orbit=mean_anomaly: 'user' ;
       =namelist:orbit=mean_anomaly_inc: 'user' ;
       =namelist:orbit=hour_angle: 'user' ;
value-titles=User defined, Earth: Fixed, Earth: Secular variation
values='user', 'earth_fixed', 'earth_secular_variation'

[namelist:orbit=epoch]
compulsory=true
description=Reference date in Julian Days [days]
help=The Julian day number on which the specified orbital elements
    =apply. The increments are then the change in these orbital
    =elements per Julian day from the given epoch.
    =
    =The J2000 epoch is specified by the Julian day number 2451545.0
    =which equates to midday on the 1st January 2000.
sort-key=Panel-A03
type=real

[namelist:orbit=fixed_azimuth_angle]
compulsory=true
description=Fixed stellar azimuth angle
           =measured clockwise from north [radians]
help=This is an idealised setting where the solar / stellar azimuth angle
    =will be the same for all points in the model. This overrides the
    =angles calculated from the orbital elements but retains the distance
    =of the planet from the host star.
sort-key=Panel-A17
type=real

[namelist:orbit=fixed_zenith_angle]
compulsory=true
description=Fixed stellar zenith angle for all points
           =[radians]
help=This is an idealised setting where the solar / stellar zenith angle
    =will be the same for all points in the model. This overrides the
    =angles calculated from the orbital elements but retains the distance
    =of the planet from the host star.
sort-key=Panel-A16
type=real

[namelist:orbit=hour_angle]
compulsory=true
description=Hour angle at epoch [radians]
help=The fraction of the planet's day since the host star was over
    =the planet's prime meridian expressed as a fraction of a circle
    =in radians. For the Earth, this is the angle the Sun has moved
    =westwards since solar noon.
    =
    =This is the hour angle at the time of the given epoch.
sort-key=Panel-A14
type=real

[namelist:orbit=hour_angle_inc]
compulsory=true
description=Increment to hour angle
           =per Julian day from epoch [radians/day]
help=This equates to 2*pi times the length of the planet's day over the
    =length of a Julian day.
sort-key=Panel-A15
type=real

[namelist:orbit=mean_anomaly]
compulsory=true
description=Mean anomaly at epoch [radians]
help=The fraction of the orbital period since passage through periapsis
    =expressed as a fraction of a circle in radians. If the orbit were
    =completely circular then this would describe the actual angular
    =position of the planet in the orbit (the true anomaly).
    =
    =This is the mean anomaly at the time of the given epoch.
sort-key=Panel-A12
type=real

[namelist:orbit=mean_anomaly_inc]
compulsory=true
description=Increment to mean anomaly
           =per Julian day from epoch [radians/day]
help=This equates to 2*pi over the orbital period in Julian days.
sort-key=Panel-A13
type=real

[namelist:orbit=obliquity]
compulsory=true
description=Obliquity of the orbit [radians]
help=The angle between the rotational axis of the planet and the orbital axis,
    =where the direction is defined so the rotation is in the same sense (i.e.
    =anticlockwise).
sort-key=Panel-A08
type=real

[namelist:orbit=obliquity_inc]
compulsory=true
description=Increment to obliquity of the orbit
           =per Julian day from epoch [radians/day]
sort-key=Panel-A09
type=real

[namelist:orbit=observer_lat]
compulsory=true
description=Orbital latitude of observer [radians]
help=Describes the angle from the plane of the planet's orbit to the
    =position of a distant observer. Used for the calculation of diagnostics.
sort-key=Panel-A19
type=real

[namelist:orbit=observer_lon]
compulsory=true
description=Orbital longitude of observer [radians]
help=Describes the orbital angle (anticlockwise) from the ascending node
    =of the planet's orbit to the position of a distant observer. Used
    =for the calculation of diagnostics.
sort-key=Panel-A18
type=real

[namelist:orbit=semimajor_axis]
compulsory=true
description=Semi-major axis [AU]
help=One half of the major axis of the orbit, equivalent to the average
    =between the orbital distance at periapsis and apoapsis (perihelion
    =and aphelion for orbits around the Sun). For the Earth this was
    =originally defined as 1 AU (astronomical unit), but 1 AU is now
    =defined as exactly 149597870700 metres.
sort-key=Panel-A10
type=real

[namelist:orbit=semimajor_axis_inc]
compulsory=true
description=Increment to semi-major axis
           =per Julian day from epoch [AU/day]
sort-key=Panel-A11
type=real

[namelist:orbit=spin]
compulsory=true
description=Treatment of stellar motion
           =from planet's surface
!enumeration=true
help=The change in the hour angle of the sun as viewed from the
    =planet's surface over the course of the day.
    =This may be user defined or given by the following presets:
    =_________________________________________________________________
    =Earth Day
    =  hour_angle_inc = exactly 2*pi
    =  The sun appears to make a full circuit in exactly one Earth day.
    =  This setting avoids any numerical drift due to an inexact user
    =  setting of 2*pi.
    =_________________________________________________________________
    =Fixed Sun
    =  The position of the sun in the sky is fixed for all points.
    =  The solar zenith and azimuth angles are user supplied.
sort-key=Panel-A02
trigger=namelist:orbit=hour_angle_inc: 'user' ;
       =namelist:orbit=fixed_zenith_angle: 'fixed_sun' ;
       =namelist:orbit=fixed_azimuth_angle: 'fixed_sun' ;
value-titles=User defined, Earth Day, Fixed Sun
values='user', 'earth_day', 'fixed_sun'

#==============================================================================
# OROGRAPHY
#==============================================================================
[namelist:orography]
compulsory=true
description=Settings for the selected analytic orography profiles.
help=Settings for the Schar, Witch-of-Agnesi, Bell-shaped and DCMIP 2.0.0 analytic
    =orography profiles in Cartesian and spherical coordinates (only Cartesian
    =for Bell-shaped and only spherical for DCMIP 2.0.0 profile).
ns=namelist/Model/Planet/Orography
sort-key=Panel-A02

[namelist:orography=orog_init_option]
compulsory=true
description=Choice for initialization of orography fields
!enumeration=true
fail-if=this=='analytic' and namelist:orography=profile=="'none'"       ;
       =this=='ancil' and namelist:io=use_xios_io==".false."
help=Choose how to initialize the orography fields:
    = 'analytic'        : Initialization is performed analytically. Profile must be
    =                     set in the orography namelist option.
    = 'ancil'           : Initialize the orography from an ancillary file. Must be
    =                     used with xios.
sort-key=Panel-A02
trigger=namelist:orography=profile: 'analytic'  ;
       =namelist:files=orography_ancil_path:    'ancil'     ;
values='none', 'analytic', 'ancil'

[namelist:orography=profile]
compulsory=true
description=orography profile
!enumeration=true
fail-if=this == "'dcmip200'" and namelist:base_mesh=geometry        != "'spherical'" ;
       =this == "'bell'" and namelist:base_mesh=geometry            != "'planar'"    ;
       =this == "'none'" and namelist:orography=orog_init_option    =="'analytic'"   ;
help=none     : No orography (flat surface)
    =schar    : Schar mountain profile
    =agnesi   : Witch-of-Agnesi mountain profile
    =dcmip200 : DCMIP 2.0.0 mountain orography
    =bell     : Bell-shaped mountain profile
sort-key=Panel-A02
trigger=namelist:orography_agnesi_cartesian:   'agnesi'   ;
       =namelist:orography_agnesi_spherical:   'agnesi'   ;
       =namelist:orography_bell_cartesian:     'bell'     ;
       =namelist:orography_dcmip200_spherical: 'dcmip200' ;
       =namelist:orography_schar_cartesian:    'schar'    ;
       =namelist:orography_schar_spherical:    'schar'    ;
value-titles=None, Agnesi, Bell-shaped, Schar, DCMIP 2.0.0
values='none', 'agnesi', 'bell', 'schar', 'dcmip200'

#==============================================================================
# OROGRAPHY (AGNESI CARTESIAN)
#==============================================================================
[namelist:orography_agnesi_cartesian]
compulsory=true
description=Witch-of-Agnesi orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Witch-of-Agnesi mountain function
    =in Cartesian biperiodic domain in x and/or y directions.
    =Reference: Melvin et al. (2010), Section 4.3.
ns=namelist/Model/Planet/Agnesi cartesian
sort-key=Section-A03
title=Agnesi cartesian profile

[namelist:orography_agnesi_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_agnesi_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_agnesi_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_agnesi_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_agnesi_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_agnesi_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Melvin et al. (2010), Section 4.3. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (AGNESI SPHERICAL)
#==============================================================================
[namelist:orography_agnesi_spherical]
compulsory=true
description=Witch-of-Agnesi orography profile in spherical coordinates.
help=Settings for analytic orography profile of Witch-of-Agnesi mountain function
    =in spherical domain. Reference: Wedi and Smolarkiewicz (2009), Section 4.1.
ns=namelist/Model/Planet/Agnesi spherical
sort-key=Section-A03
title=Agnesi spherical profile

[namelist:orography_agnesi_spherical=half_width]
compulsory=true
description=Half-width of mountain [m]
fail-if=this < 0.0
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[!namelist:orography_agnesi_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_agnesi_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A04
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[!namelist:orography_agnesi_spherical=lambda_focus]
compulsory=false
description=Latitude of mountain focus [radian]
expression=namelist:orography_agnesi_spherical=lambda_focus_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=lambda_focus_dec]
compulsory=true
description=Latitude of mountain focus unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A06
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[namelist:orography_agnesi_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_agnesi_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_agnesi_spherical=phi_centre_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[!namelist:orography_agnesi_spherical=phi_focus]
compulsory=false
description=Longitude of mountain focus [radian]
expression=namelist:orography_agnesi_spherical=phi_focus_dec * source:constants_mod=PI
help=See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
type=real

[namelist:orography_agnesi_spherical=phi_focus_dec]
compulsory=true
description=Longitude of mountain focus unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wedi and Smolarkiewicz (2009), Section 4.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A05
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

#==============================================================================
# OROGRAPHY (BELL CARTESIAN)
#==============================================================================
[namelist:orography_bell_cartesian]
compulsory=true
description=Bell-Shaped orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Bell-shaped mountain function
    =in Cartesian biperiodic domain in x and/or y directions.
    =Reference: Lock et al. (2012), Section 3.b.
ns=namelist/Model/Planet/Bell cartesian
sort-key=Section-A03
title=Bell cartesian profile

[namelist:orography_bell_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Lock et al. (2012), Section 3.b. for the analytic form.
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_bell_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_bell_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_bell_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_bell_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_bell_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Lock et al. (2012), Section 3.b. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (DCMIP 2.0.0 SPHERICAL)
#==============================================================================
[namelist:orography_dcmip200_spherical]
compulsory=true
description=DCMIP 2.0.0 orography profile in spherical coordinates.
help=Settings for analytic orography profile of DCMIP 2.0.0 mountain function
    =in spherical domain.
    =Reference: Ullrich et al. (2012) DCMIP documentation, Section 2.0.
ns=namelist/Model/Planet/DCMIP2.0.0 spherical
sort-key=Section-A03
title=DCMIP spherical profile

[!namelist:orography_dcmip200_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_dcmip200_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A04
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[namelist:orography_dcmip200_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_dcmip200_spherical=osc_half_width]
compulsory=false
description=Oscillation half-width of mountain function [radian]
expression=namelist:orography_dcmip200_spherical=osc_half_width_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=osc_half_width_dec]
compulsory=true
description=Oscillation half-width of mountain function unscaled by PI
fail-if=this < 0.0
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A05
type=real

[!namelist:orography_dcmip200_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_dcmip200_spherical=phi_centre_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[!namelist:orography_dcmip200_spherical=radius]
compulsory=false
description=Mountain radius [radian]
expression=namelist:orography_dcmip200_spherical=radius_dec * source:constants_mod=PI
help=See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
type=real

[namelist:orography_dcmip200_spherical=radius_dec]
compulsory=true
description=Mountain radius unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Ullrich et al. (2012) DCMIP documentation, Section 2.0. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A02
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

#==============================================================================
# OROGRAPHY (SCHAR CARTESIAN)
#==============================================================================
[namelist:orography_schar_cartesian]
compulsory=true
description=Schar orography profile in Cartesian coordinates.
help=Settings for analytic orography profile of Schar mountain function
    =in spherical domain. Reference: Melvin et al. (2010), Section 4.4.
ns=namelist/Model/Planet/Schar cartesian
sort-key=Section-A03
title=Schar cartesian profile

[namelist:orography_schar_cartesian=direction]
compulsory=true
description=Direction of mountain (x, y, or xy)
!enumeration=true
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
sort-key=Panel-A06
value-titles=x, y, xy
values='x', 'y', 'xy'

[namelist:orography_schar_cartesian=half_width_x]
compulsory=true
description=Half-width of mountain in x direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:orography_schar_cartesian=half_width_y]
compulsory=true
description=Half-width of mountain in y direction [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:orography_schar_cartesian=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[namelist:orography_schar_cartesian=wavelength]
compulsory=true
description=Wavelength of Cos part of mountain function [m]
fail-if=this < 0.0
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A07
type=real

[namelist:orography_schar_cartesian=x_centre]
compulsory=true
description=x coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_x > this ;
       =namelist:domain_size=planar_domain_max_x < this ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
sort-key=Panel-A04
type=real

[namelist:orography_schar_cartesian=y_centre]
compulsory=true
description=y coordinate of mountain centre [m]
fail-if=namelist:domain_size=planar_domain_min_y > this ;
       =namelist:domain_size=planar_domain_max_y < this ;
help=See Melvin et al. (2010), Section 4.4. for the analytic form.
!kind=default
sort-key=Panel-A05
type=real

#==============================================================================
# OROGRAPHY (SCHAR SPHERICAL)
#==============================================================================
[namelist:orography_schar_spherical]
compulsory=true
description=Schar orography profile in spherical coordinates.
help=Settings for analytic orography profile of Schar mountain function
    =in spherical domain. Reference: Wood et al. (2013), Section 7.1.
ns=namelist/Model/Planet/Schar spherical
sort-key=Section-A03
title=Schar spherical profile

[namelist:orography_schar_spherical=half_width]
compulsory=true
description=Half-width of mountain [m]
fail-if=this < 0.0
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[!namelist:orography_schar_spherical=lambda_centre]
compulsory=false
description=Latitude of mountain centre [radian]
expression=namelist:orography_schar_spherical=lambda_centre_dec * source:constants_mod=PI
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
type=real

[namelist:orography_schar_spherical=lambda_centre_dec]
compulsory=true
description=Latitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=-0.5:0.5
sort-key=Panel-A04
type=real
warn-if=this >  0.5 ;
       =this < -0.5 ;

[namelist:orography_schar_spherical=mountain_height]
compulsory=true
description=Height of mountain [m]
fail-if=this < 0.0 ;
       =this > namelist:extrusion=domain_top ;
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:orography_schar_spherical=phi_centre]
compulsory=false
description=Longitude of mountain centre [radian]
expression=namelist:orography_schar_spherical=phi_centre_dec * source:constants_mod=PI
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
type=real

[namelist:orography_schar_spherical=phi_centre_dec]
compulsory=true
description=Longitude of mountain centre unscaled by PI
help=Scaled by PI in the configuration setup.
    =See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:2.0
sort-key=Panel-A03
type=real
warn-if=this > 2.0 ;
       =this < 0.0 ;

[namelist:orography_schar_spherical=wavelength]
compulsory=true
description=Wavelength of Cos part of mountain function [m]
fail-if=this < 0.0
help=See Wood et al. (2013), Section 7.1. for the analytic form.
!kind=default
range=0.0:
sort-key=Panel-A07
type=real

#==============================================================================
# GLOBAL MESH PARTITIONING
#==============================================================================
[namelist:partitioning]
compulsory=true
description=Global mesh panel partitioning.
help=For parallel computing, the 2D global mesh is divided up into partitions.
    =Each process rank runs an instance of the model on one partition. The
    =partition decompostion is specified on a `per panel` basis.
    =i.e. The cubedsphere has six panels; the planar mesh has one panel.
ns=namelist/Model/Mesh/Partitioning
sort-key=Section-A02

[namelist:partitioning=panel_decomposition]
compulsory=true
description=Panel partition decomposition
!enumeration=true
help=Partitioner will attempt to generate partitioned panels based
    =on the given enumeration choices:
    =
    =  * auto:   Decompose domain as close to square decompositions.
    =  * row:    Single row of partitions.
    =  * column: Single column of partitions.
    =  * custom: x/y decompositions explicitly requested using
    =            namelist:partitioning=panel_xproc,
    =            namelist:partitioning=panel_yproc.
    =
!kind=default
sort-key=Panel-A01
trigger=namelist:partitioning=panel_xproc: this == "'custom'" ;
       =namelist:partitioning=panel_yproc: this == "'custom'" ;
value-titles=Auto, Single row, Single column, Custom
values='auto', 'row', 'column', 'custom'

[namelist:partitioning=panel_xproc]
compulsory=true
description=Panel partitions in x-direction
fail-if=this < 1 ;
       =(env=TOTAL_RANKS == 1) and (this != 1) ;
       =(env=TOTAL_RANKS != 1) and (namelist:base_mesh=geometry=="'spherical'") and ( this*namelist:partitioning=panel_yproc != env=TOTAL_RANKS/6 ) ;
       =(env=TOTAL_RANKS != 1) and (namelist:base_mesh=geometry=="'planar'")    and ( this*namelist:partitioning=panel_yproc != env=TOTAL_RANKS ) ;
help=Number of partitions to generate across the x-direction of a panel of the mesh
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:partitioning=panel_yproc]
compulsory=true
description=Panel partitions in y-direction
fail-if=this < 1 ;
       =(env=TOTAL_RANKS == 1) and (this != 1) ;
       =(env=TOTAL_RANKS != 1) and (namelist:base_mesh=geometry=="'spherical'") and ( this*namelist:partitioning=panel_xproc != env=TOTAL_RANKS/6 ) ;
       =(env=TOTAL_RANKS != 1) and (namelist:base_mesh=geometry=="'planar'") and    ( this*namelist:partitioning=panel_xproc != env=TOTAL_RANKS ) ;
help=Number of partitions to generate across the y-direction of a panel of the mesh
!kind=default
range=1:
sort-key=Panel-A03
type=integer

#==============================================================================
# PHYSICS SECTION
#==============================================================================
[namelist:physics]
compulsory=true
description=Options for physics parametrizations
help=The placement variables indicate where a given physics routine is placed:
    =if > 0: then placement is in fast physics
    =if =0: then routine is not called
    =if < 0: then placement is in slow physics
ns=namelist/Science

[namelist:physics=blayer_placement]
compulsory=true
description=Boundary layer placement
!enumeration=true
help=Determines where the boundary layer scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A03
value-titles=Fast\ physics
values='fast'

[namelist:physics=convection_placement]
compulsory=true
description=Convection placement
!enumeration=true
help=Determines where the convection scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A04
value-titles=Fast\ physics
values='fast'

[namelist:physics=heldsuarez_thermo_placement]
compulsory=true
description=Held-Suarez theta forcing
           =
help=Held-Suarez theta forcing term, based on Wedi and Smolarkiewicz 2009:
    = Wedi, N. P. and Smolarkiewicz, P. K. (2009), A framework for testing global
    = non-hydrostatic models. Q.J.R. Meteorol. Soc., 135: 469-484.
    = doi: 10.1002/qj.377
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A01
trigger=namelist:physics=hs_random: this != 0 ;
!type=integer
value-titles=None, Slow physics
values=0, -1

[namelist:physics=heldsuarez_wind_placement]
compulsory=true
description=Held-Suarez wind forcing
           =
help=Held-Suarez wind forcing term, based on Wedi and Smolarkiewicz 2009:
    = Wedi, N. P. and Smolarkiewicz, P. K. (2009), A framework for testing global
    = non-hydrostatic models. Q.J.R. Meteorol. Soc., 135: 469-484.
    = doi: 10.1002/qj.377
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A02
!type=integer
value-titles=None, Slow physics
values=0, -1

[namelist:physics=hs_random]
compulsory=true
description=Random perturbations to the Held-Suarez theta forcing
help=Option to add in a random perturbations to the Held-Suarez theta forcing:
    =  After the calculatation of the theta increment, this will be multiplied
    =  by a factpor (1 + 0.0001*(p - 0.5)), where p is a random number taken from
    =  a Uniform distribution on [0,1].
    =  Note, this is for model development purposes.
!kind=default
ns=namelist/Science/Prescribed Forcing
sort-key=Section-A09
type=logical

[namelist:physics=microphysics_placement]
compulsory=true
description=Microphysics placement
!enumeration=true
help=Determines where the microphysics scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A05
value-titles=Slow\ physics
values='slow'

[namelist:physics=orographic_drag_placement]
compulsory=true
description=Orographic drag placement
!enumeration=true
help=Determines where the orographic drag scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A11
value-titles=Slow\ physics
values='slow'

[namelist:physics=radiation_placement]
compulsory=true
description=Radiative transfer placement
!enumeration=true
help=Determines where the radiation transfer scheme is called from.
ns=namelist/Science/Timestep placement
sort-key=Panel-A06
value-titles=Slow\ physics
values='slow'

[namelist:physics=sample_physics_winds]
compulsory=false
description=Switch to sample FE winds at physics locations
help=If true then sample FE winds at physics locations, else use a
    =  Galerkin projection
!kind=default
ns=namelist/Science/Physics Mapping
sort-key=Section-A10
type=logical

[namelist:physics=spectral_gwd_placement]
compulsory=true
description=Spectral gravity wave drag placement
!enumeration=true
help=Determines where the spectral gravity wave drag scheme is called from.
!kind=default
ns=namelist/Science/Timestep placement
sort-key=Panel-A07
value-titles=Slow\ physics
values='slow'

#==============================================================================
# PLANET
#==============================================================================
[namelist:planet]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Model/Planet
sort-key=Section-A03

[namelist:planet=cp]
compulsory=true
description=[J/(kg K)]
fail-if=this <= 0.0 ;
help=Specific heat of dry air at constant pressure [J/(kg K)]
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A05
type=real

[!namelist:planet=cv]
compulsory=false
expression=namelist:planet=cp - namelist:planet=rd
help=Specific heat of dry air at constant volume [J/(kg K)]
!kind=default
type=real

[!namelist:planet=epsilon]
compulsory=false
description=Ratio of molecular weights: dry air / water
expression=namelist:planet=rd / source:driver_water_constants_mod=gas_constant_h2o
help=Molecular weight of water divided by molecular weight of dry air.
    =[dimensionless]
!kind=default
type=real

[namelist:planet=gravity]
compulsory=true
description=[m/(s^2)]
fail-if=this <= 0.0 ;
help=Surface equatorial value of gravity [m/s^2]
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A01
type=real

[!namelist:planet=kappa]
compulsory=false
expression=namelist:planet=rd / namelist:planet=cp
help=Ratio of Rd and Cp [dimensionless]
!kind=default
type=real

[namelist:planet=omega]
compulsory=true
description=[units?]
help=??????
    =??????
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A03
type=real

[namelist:planet=p_zero]
compulsory=true
description=[Pa]
help=Reference surface pressure [Pa]
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A06
type=real

[namelist:planet=radius]
compulsory=true
description=[m]
fail-if=this <= 0.0 ;
help=??????
    =??????
!kind=default
ns=namelist/Model/Planet/Properties
range=0.0:
sort-key=Panel-A02
type=real

[namelist:planet=rd]
compulsory=true
description=[J/(kg K)]
help=Gas constant for dry air [J/(kg K)]
!kind=default
ns=namelist/Model/Planet/Properties
sort-key=Panel-A04
type=real

[!namelist:planet=recip_epsilon]
compulsory=false
expression=source:driver_water_constants_mod=gas_constant_h2o / namelist:planet=rd
help=Reciprocal of ratio molecular mass of water to dry air.
    =[dimensionless]
!kind=default
type=real

[!namelist:planet=scaled_omega]
compulsory=false
expression=namelist:planet=omega * namelist:planet=scaling_factor
help=??????
    =??????
!kind=default
type=real

[!namelist:planet=scaled_radius]
compulsory=false
expression=namelist:planet=radius / namelist:planet=scaling_factor
help=??????
    =??????
!kind=default
type=real

[namelist:planet=scaling_factor]
compulsory=true
description=??????
help=??????
    =??????
!kind=default
sort-key=Panel-A07
type=real

#==============================================================================
# Secion choice namelist
#==============================================================================
[namelist:section_choice]
compulsory=true
description=Specify section choices for this configuration.
ns=namelist/Science/section choice
sort-key=Section-A01

[namelist:section_choice=aerosol]
compulsory=true
description=Which aerosol scheme to use
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics  == ".false." ;
help=The following aerosol options are available from the aerosol namelist
    = GLOMAP-mode climatology
    =
    =Note that only one of these aerosol options can be used at a time.
sort-key=Panel-A01
trigger=namelist:aerosol: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=boundary_layer]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=??????
    =??????
sort-key=Panel-A02
trigger=namelist:physics=blayer_placement: this != "'none'" ;
       =namelist:section_choice=convection: this != "'none'" ;
       =namelist:blayer: this == "'um'" ;
       =namelist:mixing=method: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=cloud]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics  == ".false." ;
       =this != "'none'" and namelist:formulation=use_moisture == ".false." ;
help=??????
    =??????
sort-key=Panel-A03
trigger=namelist:cloud: this == "'um'" ;
       =namelist:section_choice=microphysics: this != "'none'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=convection]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false."  ;
       =this != "'none'" and namelist:section_choice=boundary_layer == "'none'" ;
help=??????
    =??????
sort-key=Panel-A04
trigger=namelist:physics=convection_placement: this != "'none'" ;
       =namelist:convection: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=dynamics]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_wavedynamics == ".false." ;
help=??????
    =??????
sort-key=Panel-A05
value-titles=None, GungHo
values='none', 'gungho'

[namelist:section_choice=microphysics]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
       =this != "'none'" and namelist:section_choice=cloud == "'none'" ;
help=??????
    =??????
sort-key=Panel-A06
trigger=namelist:physics=microphysics_placement: this != "'none'" ;
       =namelist:microphysics: this == "'um'" ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=orographic_drag]
compulsory=true
description=Orographic drag scheme
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Orographic drag scheme
    ======================================
    =Accounts for drag forces on the atmosphere due to interaction
    =with sub-grid mountains.
    =
    =Options are:
    =_________________________________________________________________
    =None:
    =  No orographic drag scheme applied.
    =_________________________________________________________________
    =UM:
    =  The orographic drag scheme from the Unified Model.
    =
    =  This scheme is based on the Lott and Miller (1997) parametrization and
    =  includes drag contributions from low-level flow blocking and
    =  orographic gravity waves. It accounts for sub-grid orography of
    =  horizontal scales larger than 6 km (i.e. hydrostatic scales).
    =  (see UM Documentation paper, UMDP022).
sort-key=Panel-A07
trigger=namelist:physics=orographic_drag_placement: this != "'none'" ;
       =namelist:orographic_drag:                   this == "'um'"   ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=radiation]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=??????
    =??????
sort-key=Panel-A08
trigger=namelist:radiation:                   this == "'socrates'" ;
       =namelist:physics=radiation_placement: this != "'none'"     ;
       =namelist:orbit:                       this != "'none'"     ;
       =namelist:star:                        this != "'none'"     ;
value-titles=None, SOCRATES
values='none', 'socrates'

[namelist:section_choice=spectral_gwd]
compulsory=true
description=
           =
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Spectral gravity wave drag scheme
    ======================================
    =Accounts for drag forces on the atmosphere due to non-orographic
    =gravity wave sources.
    =
    =Options are:
    =_________________________________________________________________
    =None:
    =  No spectral gravity wave drag scheme applied.
    =_________________________________________________________________
    =UM:
    =  The Ultra Simple Spectral Parametrization (USSP) of gravity wave drag
    =  from the Unified Model.
    =
    =  The approach taken is that of Warner and McIntyre (1996), Warner and
    =  McIntyre (1999) and Warner and McIntyre (2001) with further
    =  modifications (Scaife et al., 2002; Scaife et al., 2000).
    =
    =  The scheme includes an option for convective gravity wave sources.
    =
    =  See UM documentation page 034 (UMDP034).
sort-key=Panel-A09
trigger=namelist:physics=spectral_gwd_placement: this != "'none'" ;
       =namelist:spectral_gwd:                   this == "'um'"   ;
value-titles=None, Unified Model
values='none', 'um'

[namelist:section_choice=surface]
compulsory=true
description=Which surface scheme to use
!enumeration=true
fail-if=this != "'none'" and namelist:formulation=use_physics == ".false." ;
help=Currently Jules is the only surface scheme available for use
sort-key=Panel-A10
trigger=namelist:surface: this == "'jules'" ;
value-titles=None, JULES
values='none','jules'

#==============================================================================
# MASS MATRIX SOLVER
#==============================================================================
[namelist:solver]
compulsory=true
description=??????
help=This namelist is for using iteratives solvers for the inversion of mass matrices
ns=namelist/Science/Dynamics/Mass Matrix Solver
sort-key=Section-A04

[namelist:solver=gcrk]
compulsory=true
description=??????
help=Dimension of the approximate Krylov subspace.
    =In other words, it is the number of potential
    =residual vectors to calculate at each
    =iteration of the solver.
!kind=default
sort-key=Panel-A05
type=integer

[namelist:solver=maximum_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Iteration limit for solver
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:solver=method]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A01
value-titles=biconjugate gradient stabilized,
            =conjugate gradient,
            =generalized conjugate residual,
            =generalized minimal residual,
            =flexible generalized minimal residual,
            =precondition only,
            =jacobi
values='bicgstab', 'cg', 'gcr', 'gmres', 'fgmres', 'prec_only', 'jacobi'

[namelist:solver=preconditioner]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A04
value-titles=None, Diagonal
values='none', 'diagonal'

[namelist:solver=tolerance]
compulsory=true
description=??????
help=Relative tolerance of solver
!kind=default
sort-key=Panel-A03
type=real

#==============================================================================
# STAR
#==============================================================================
[namelist:star]
compulsory=true
description=Properties of host star
ns=namelist/Model/Planet/Star
sort-key=Section-A04
title=Star

[namelist:star=stellar_constant]
compulsory=true
description=Stellar irradiance at 1 AU [Wm-2]
help=The flux received from the host star at a distance of 1 astronomical unit.
    =For the Sun, this is the "Solar constant".
sort-key=Panel-A01
type=real

[namelist:star=stellar_radius]
compulsory=true
description=Radius of host star [m]
help=Radius at the photosphere of the host star used for the calculation
    =of diagnostics.
sort-key=Panel-A02
type=real

#==============================================================================
# SUBGRID
#==============================================================================
[namelist:subgrid]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/Subgrid
sort-key=Section-A09

[namelist:subgrid=dep_pt_stencil_extent]
compulsory=true
description=??????
fail-if=this < 1 ;
help=??????
    =??????
!kind=default
range=1:
sort-key=Panel-A02
type=integer

[namelist:subgrid=rho_approximation]
compulsory=true
description=??????
!enumeration=true
help=??????
    =??????
sort-key=Panel-A01
value-titles=constant_subgrid, constant_positive, ppm_no_limiter, ppm_positive_only,
            =ppm_positive_monotone
values='constant_subgrid', 'constant_positive', 'ppm_no_limiter', 'ppm_positive_only',
      ='ppm_positive_monotone'

[namelist:subgrid=rho_approximation_stencil_extent]
compulsory=true
description=??????
fail-if=this < 0 ;
help=??????
    =??????
!kind=default
# This value (at the moment) should only take the values 0 or 2.
# rho_approximation_stencil_extent should equal 0 if constant_subgrid or
# constant_positive are chosen
# rho_approximation_stencil_extent should equal 2 otherwise, i.e. if ppm_no_limiter
# ppm_positive_only or ppm_positive_monotone are chosen
range=0:
sort-key=Panel-A03
type=integer

#==============================================================================
# TIME CONTROL
#==============================================================================
[namelist:time]
compulsory=true
description=Time options
help=At the moment, this just sets the start and end timestep for the run
ns=namelist/Job/Time
sort-key=Section-A01
title=Time Control

[namelist:time=calendar]
compulsory=true
description=How to interpret date/time provided by humans
!enumeration=true
sort-key=PanelA00
values='timestep'

[namelist:time=timestep_end]
compulsory=true
description=Last timestep in run
sort-key=Panel-A02
type=character

[namelist:time=timestep_start]
compulsory=true
description=First timestep in run
sort-key=Panel-A01
type=character

#==============================================================================
# TIMESTEPPING
#==============================================================================
[namelist:timestepping]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Job/Timestepping
sort-key=Section-A03

[namelist:timestepping=alpha]
compulsory=true
description=??????
help=Time off-centering parameter
!kind=default
sort-key=Panel-A03
type=real

[!namelist:timestepping=beta]
compulsory=false
expression=1.0_r_def - namelist:timestepping=alpha
help=??????
    =??????
!kind=default
type=real

[namelist:timestepping=dt]
compulsory=true
description=??????
fail-if=this < 0.0 ;
help=Timestep in seconds
!kind=double
range=0.0:
sort-key=Panel-A02
type=real

[namelist:timestepping=inner_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Number of inner (Newton) iterations to do
!kind=default
range=1:
sort-key=Panel-A08
type=integer

[namelist:timestepping=method]
compulsory=true
description=Use either explicit Runge-Kutta timestepping or (iterative-) Semi-Implicit scheme
!enumeration=true
fail-if=namelist:formulation=transport_only == true and namelist:transport=scheme == "'method_of_lines'" and this == "'semi-implicit'" ;
help=Set the timestepping method for the GungHo dynamical core, either a fully explicit multi-stage
    =Runge-Kutta method ('rk') or an (iterative-) Semi-Implicit scheme ('semi_implicit')
sort-key=Panel-A01
trigger=namelist:timestepping=tau_u: 'semi_implicit' ;
       =namelist:timestepping=tau_t: 'semi_implicit' ;
       =namelist:timestepping=tau_r: 'semi_implicit' ;
       =semi-implicit:               'semi_implicit' ;
       =namelist:timestepping=outer_iterations: 'semi_implicit' ;
       =namelist:timestepping=inner_iterations: 'semi_implicit' ;
value-titles=Semi-implicit, Runge-Kutta
values='semi_implicit', 'rk'

[namelist:timestepping=outer_iterations]
compulsory=true
description=??????
fail-if=this < 1 ;
help=Number of outer (advection) iterations to do
!kind=default
range=1:
sort-key=Panel-A07
type=integer

[namelist:timestepping=runge_kutta_method]
compulsory=true
description=?????
!enumeration=true
fail-if=
help=?????
    =?????
ns=namelist/Job/Timestepping/runge kutta
sort-key=Panel-A01
value-titles=Stong Stability Preserving: Order-2,
            =Stong Stability Preserving: Order-3,
            =Stong Stability Preserving: Order-4,
            =Stong Stability Preserving: Order-5
values='ssp2', 'ssp3', 'ssp4', 'ssp5'

[namelist:timestepping=spinup_alpha]
compulsory=true
description=??????
help=If true then spin up alpha over the spin up period
!kind=default
sort-key=Panel-A11
type=logical

[namelist:timestepping=spinup_period]
compulsory=true
description=??????
help=>=0 time in seconds for the spin up period
!kind=double
sort-key=Panel-A10
type=real

[namelist:timestepping=spinup_winds]
compulsory=true
description=??????
help=If true then don't update winds over the spin up period
!kind=default
sort-key=Panel-A12
type=logical

[namelist:timestepping=tau_r]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for density in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A06
type=real

[namelist:timestepping=tau_t]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for potential temperature in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A05
type=real

[namelist:timestepping=tau_u]
compulsory=true
description=??????
fail-if=this < 0.0
help=Relaxation parameter for velocity in semi-implicit method
!kind=default
ns=namelist/Job/Timestepping/semi-implicit
range=0.0:
sort-key=Panel-A04
type=real

#==============================================================================
# TRANSPORT
#==============================================================================
[namelist:transport]
compulsory=true
description=??????
help=??????
    =??????
ns=namelist/Science/Dynamics/Transport
sort-key=Section-A10

[namelist:transport=consistent_metric]
compulsory=true
description=??????
fail-if=
help=Compute metric terms with the advection scheme
!kind=default
sort-key=Panel-A05
trigger=
type=logical

[namelist:transport=enforce_monotonicity]
compulsory=true
description=??????
fail-if=
help=Enforce monotonicity with Method of Lines advection
!kind=default
sort-key=Panel-A06
# This option should only be triggered if transport scheme is method_of_lines
trigger=
type=logical

[namelist:transport=fv_advective_order]
compulsory=true
description=??????
fail-if=
help=??????
    =??????
!kind=default
!range=
sort-key=Panel-A04
# This option should only be triggered if transport scheme is method_of_lines
trigger=
type=integer

[namelist:transport=fv_flux_order]
compulsory=true
description=??????
fail-if=
help=??????
    =??????
!kind=default
!range=
sort-key=Panel-A03
trigger=
type=integer

[namelist:transport=oned_reconstruction]
compulsory=true
description=Control use of 1D or 2D polynomial reconstruction of tracer fields
           =for the method of lines advection scheme
fail-if=
help=Use 1D or 2D horizontal reconstruction
!kind=default
sort-key=Panel-A07
# This option should only be triggered if transport scheme is method_of_lines
trigger=
type=logical

[namelist:transport=operators]
compulsory=true
description=??????
!enumeration=true
fail-if=
help=??????
    =??????
sort-key=Panel-A02
# This option should only be triggered if transport scheme is method_of_lines
trigger=
value-titles=Finite volume, Finite element
values='fv', 'fem'

[namelist:transport=scheme]
compulsory=true
description=??????
!enumeration=true
fail-if=
help=Method of lines        : Uses Runge-Kutta SSP3 for time integration of fluxes
    =Cosmic horizontal      : Cosmic transport scheme in the horizontal
    =Cosmic YZ (biperiodic) : Cosmic transport scheme for a Y-Z slice of (biperiodic mesh)
    =Cosmic 3D              : 3D Cosmic transport for biperiodic and cubed-sphere mesh
sort-key=Panel-A01
trigger=namelist:subgrid:                        this != "'method_of_lines'" ;
       =namelist:biperiodic_deppt:               this != "'method_of_lines'" ;
value-titles=Method of lines, Cosmic horizontal,  Cosmic YZ (biperiodic),  Cosmic 3D
#      = namelist:transport=operators:            this == "'method_of_lines'" ;
#      = namelist:transport=fv_advective_order:   this == "'method_of_lines'" ;
#      = namelist:transport=enforce_monotonicity: this == "'method_of_lines'" ;
#trigger= namelist:subgrid:                        this != "'method_of_lines'" ;
#       = namelist:biperiodic_deppt:               this != "'method_of_lines'" ;
#       = namelist:transport=operators:            this == "'method_of_lines'" ;
#       = namelist:transport=fv_advective_order:   this == "'method_of_lines'" ;
#       = namelist:transport=enforce_monotonicity: this == "'method_of_lines'" ;
#       = namelist:transport=oned_reconstruction:  this == "'method_of_lines'" ;
values='method_of_lines', 'horz_cosmic', 'yz_bip_cosmic', 'cosmic_3D'

#==============================================================================
# WELL MIXED GASES
#==============================================================================
[namelist:well_mixed_gases]
compulsory=true
description=Mass mixing ratios of gases [kg/kg]
help=Mass mixing ratios to be used for all points and all levels
    =where a gas is considered well-mixed in the atmosphere.
ns=namelist/Model/Planet/Atmospheric gases
sort-key=Section-A01
title=Atmospheric gases

[namelist:well_mixed_gases=cfc113_mix_ratio]
compulsory=true
description=CFC-113 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A09
type=real

[namelist:well_mixed_gases=cfc11_mix_ratio]
compulsory=true
description=CFC-11 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A07
type=real

[namelist:well_mixed_gases=cfc12_mix_ratio]
compulsory=true
description=CFC-12 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A08
type=real

[namelist:well_mixed_gases=ch4_mix_ratio]
compulsory=true
description=CH4 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A03
type=real

[namelist:well_mixed_gases=co2_mix_ratio]
compulsory=true
description=CO2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A01
type=real

[namelist:well_mixed_gases=hcfc22_mix_ratio]
compulsory=true
description=HCFC-22 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A10
type=real

[namelist:well_mixed_gases=hfc134a_mix_ratio]
compulsory=true
description=HFC-134a mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A11
type=real

[namelist:well_mixed_gases=n2_mix_ratio]
compulsory=true
description=N2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A05
type=real

[namelist:well_mixed_gases=n2o_mix_ratio]
compulsory=true
description=N2O mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A02
type=real

[namelist:well_mixed_gases=o2_mix_ratio]
compulsory=true
description=O2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A04
type=real

[namelist:well_mixed_gases=so2_mix_ratio]
compulsory=true
description=SO2 mass mixing ratio
fail-if=this < 0.0 ;
range=0.0:
sort-key=Panel-A06
type=real

[planet properties]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Model/Planet/Properties
sort-key=Section-A02

[run configuration]
compulsory=false
ns=namelist
title=Run Task Settings

[runge-kutta]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Timestepping/runge kutta
sort-key=Section-A01
title=Runge-Kutta

#==============================================================================
# SCIENCE CONFIGURATION
#==============================================================================
[science]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Science
sort-key=Section-A03

[semi-implicit]
compulsory=false
description=??????
help=??????
    =??????
ns=namelist/Job/Timestepping/semi-implicit
sort-key=Section-A02
title=Semi-implicit

[timestep placements]
ns=namelist/Science/Timestep placement
sort-key=Section-A02
